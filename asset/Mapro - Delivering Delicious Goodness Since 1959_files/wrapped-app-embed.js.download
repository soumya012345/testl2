!function(){var e={223:function(e,t,r){r(632),r(405),r(641),r(489),r(863),r(325),r(626),r(971);class i extends HTMLElement{constructor(){super(...arguments),this.identifier="extension"}connectedCallback(){this._provider=void 0,this.replaceChildren(this.provider),this.setAttribute("target-group",this.targetGroup)}get provider(){return this._provider||(this._provider=Object.assign(document.createElement(`wrapped-${this.providerKind}-provider`),{index:this.index,block:this.block,option:this.option})),this._provider}get index(){return this.getAttribute("index")||0}}customElements.define("wrapped-extension",i)},489:function(e,t,r){"use strict";r.r(t);var i=r(709);const n=document.createElement("template");n.innerHTML='\n<div part="container">\n  <label>\n    <input type="checkbox" />\n    <span part="label"></span>\n    <span part="pricing"></span>\n  </label>\n</div>\n';class a extends HTMLElement{constructor(){super(...arguments),this.identifier="feature-checkbox-simple"}connectedCallback(){this.querySelector('[part="container"]')||(this.replaceChildren(n.content.cloneNode(!0)),this.setDefaultAttributes(),this.setEventListeners(),this.createGiftThumbail())}setDefaultAttributes(){this.setAttribute("enabled",this.enabled),this.setAttribute("part","feature"),this.setAttribute("feature","checkbox"),this.inputElement.value="yes",this.inputElement.checked=this.isChecked,this.inputElement.disabled=this.isDisabled,this.enabled&&(this.block.target.formTarget&&this.inputElement.setAttribute("form",this.block.target.formTarget),this.handleFieldNames()),this.spanElement.innerHTML=this.spanElementValue,this.spanPricingElement.innerHTML=this.spanPricingElementValue}setEventListeners(){this.inputElement.addEventListener("change",this.onDataChange.bind(this))}onDataChange(e){e.stopPropagation(),this.provider.isChecked=e.target.checked,this.handleFieldNames(),this.dispatchEvent(new CustomEvent("property:changed",{bubbles:!0,composed:!0,detail:{checked:e.target.checked}}))}resetInputs(){this.inputElement.checked=this.provider.isChecked=!1,this.handleFieldNames()}handleFieldNames(){this.isChecked?this.inputElement.name=this.inputElementName:this.inputElement.removeAttribute("name")}createGiftThumbail(){if(!this.block.previewImage)return;let e;if(this.provider.variantFeature.selectedVariantImage?e=this.provider.variantFeature.selectedVariantImage:1===this.provider.availableGiftVariants.length?e=this.provider.availableGiftVariants[0]?.node?.image?.url:this.option.product?.image&&(e=this.option.product.image),e){let t=this.querySelector('span[part="thumbnail"]');t||(t=document.createElement("span"),t.setAttribute("part","thumbnail"),this.querySelector("label")?.appendChild(t)),t.style.backgroundImage=`url(${e})`}}get enabled(){return!0}get isChecked(){return this.provider.isChecked}set isChecked(e){this.inputElement.checked=e,this.handleFieldNames()}get isDisabled(){return!!this.provider.ordersLimitReached}get inputElement(){return this.querySelector("label input")}get inputElementName(){return this.provider.fieldNameFor("checkbox")}get spanElement(){return this.querySelector('label span[part="label"]')}get spanElementValue(){if(this.provider.ordersLimitReached)return"ðŸŽ Contact our store for gift packaging.";const e=window.Shopify?.locale||"en",t=this.block.labels,r=this.option.settings.giftCheckboxLabels;return t[e]||r[e]||t.primary||r.primary}get spanPricingElement(){return this.querySelector('label span[part="pricing"]')}get spanPricingElementValue(){if(this.isDisabled)return"";if(!this.option.product)return"";if(this.provider.giftVariants.length>1)return"";const e=this.provider.availableGiftVariants[0].node;return void 0===e?"":this.showPricing(e.price.amount)?i.i.formattedPrice(e.price.amount):""}showPricing(e){return e>0?this.option.product?.variantPricingPaid:this.option.product?.variantPricingFree}}customElements.define("wrapped-feature-checkbox-simple",a)},325:function(){const e=document.createElement("template");e.innerHTML='\n<div part="container">\n  <textarea></textarea>\n  <span part="message-counter"></span>\n</div>\n';class t extends HTMLElement{constructor(){super(...arguments),this.identifier="feature-message-simple"}connectedCallback(){this.replaceChildren(e.content.cloneNode(!0)),this.setDefaultAttributes(),this.setEventListeners(),this.updateCounter()}setDefaultAttributes(){this.setAttribute("enabled",this.enabled),this.setAttribute("part","feature"),this.setAttribute("feature","message"),this.textareaElement.placeholder=this.placeholder,this.textareaElement.maxLength=this.maxLength,this.textareaElement.value=this.messageValue,this.enabled&&(this.block.target.formTarget&&this.textareaElement.setAttribute("form",this.block.target.formTarget),this.handleFieldNames())}setEventListeners(){this.textareaElement.addEventListener("blur",this.onDataChange.bind(this)),this.textareaElement.addEventListener("change",this.onDataChange.bind(this)),this.textareaElement.addEventListener("input",this.onDataChange.bind(this))}onDataChange(e){e.stopPropagation(),this.messageValue!==e.target.value&&(this.messageValue=e.target.value,this.messageValue&&(this.provider.isChecked=!0),this.handleFieldNames(),this.dispatchEvent(new CustomEvent("property:changed",{bubbles:!0,composed:!0,detail:{message:e.target.value}})),this.updateCounter())}updateCounter(){const e=this.messageValue?.length||0;this.counterElement.textContent=`${e} / ${this.maxLength}`}resetInputs(){this.textareaElement.value=this.messageValue="",this.handleFieldNames(),this.updateCounter()}handleFieldNames(){this.messageValue?this.textareaElement.name=this.textareaElementName:this.textareaElement.removeAttribute("name")}get enabled(){return this.option.settings.giftMessage}get maxLength(){return parseInt(this.option.settings.giftMessageMaxChars||255)}get placeholder(){const e=window.Shopify?.locale||"en",t=this.option.settings.giftMessageLabels;return t[e]||t.primary}get textareaElement(){return this.querySelector("textarea")}get textareaElementName(){return this.parentElement.fieldNameFor("message")}get counterElement(){return this.querySelector('span[part="message-counter"]')}}customElements.define("wrapped-feature-message-simple",t)},971:function(){const e=document.createElement("template");e.innerHTML=`\n<div part="container">\n  <label>\n    <span>\n      Gift options by\n      <a\n        href="https://apps.shopify.com/wrapped?utm_source=shopify&utm_medium=onlinestore&utm_campaign=poweredby&utm_content=${window.Shopify.shop}"\n        target="_blank"\n        rel="noopener external">Wrapped</a>\n    </span>\n  </label>\n</div>\n`;class t extends HTMLElement{constructor(){super(...arguments),this.identifier="feature-powered-by-simple"}connectedCallback(){this.replaceChildren(e.content.cloneNode(!0)),this.setDefaultAttributes(),this.setEventListeners()}setDefaultAttributes(){this.setAttribute("enabled",this.enabled),this.setAttribute("part","feature"),this.setAttribute("feature","powered-by")}setEventListeners(){}get enabled(){return this.option.settings.branding}}customElements.define("wrapped-feature-powered-by-simple",t)},626:function(){const e=document.createElement("template");e.innerHTML='\n<div part="container">\n  <div part="receiver">\n    <input type="text">\n  </div>\n  <div part="sender">\n    <input type="text">\n  </div>\n</div>\n';class t extends HTMLElement{constructor(){super(...arguments),this.identifier="feature-message-simple"}connectedCallback(){this.replaceChildren(e.content.cloneNode(!0)),this.setDefaultAttributes(),this.setEventListeners()}setDefaultAttributes(){this.setAttribute("enabled",this.enabled),this.setAttribute("fields",this.displayFields),this.setAttribute("part","feature"),this.setAttribute("feature","sender-receiver"),this.senderElement.value=this.senderValue,this.senderElement.placeholder=this.senderLabel,this.receiverElement.value=this.receiverValue,this.receiverElement.placeholder=this.receiverLabel,this.enabled&&(this.block.target.formTarget&&(this.senderElement.setAttribute("form",this.block.target.formTarget),this.receiverElement.setAttribute("form",this.block.target.formTarget)),this.handleFieldNames())}setEventListeners(){this.senderElement.addEventListener("blur",this.onDataChange.bind(this)),this.senderElement.addEventListener("change",this.onDataChange.bind(this)),this.senderElement.addEventListener("input",this.onDataChange.bind(this)),this.receiverElement.addEventListener("blur",this.onDataChange.bind(this)),this.receiverElement.addEventListener("change",this.onDataChange.bind(this)),this.receiverElement.addEventListener("input",this.onDataChange.bind(this))}onDataChange(e){e.stopPropagation();const t=this.senderValue!==this.senderElement.value,r=this.receiverValue!==this.receiverElement.value;(t||r)&&(this.senderValue=this.senderElement.value,this.receiverValue=this.receiverElement.value,this.senderValue&&(this.provider.isChecked=!0),this.receiverValue&&(this.provider.isChecked=!0),this.handleFieldNames(),this.dispatchEvent(new CustomEvent("property:changed",{bubbles:!0,composed:!0,detail:{sender:this.senderValue,receiver:this.receiverValue}})))}resetInputs(){this.senderElement.value=this.senderValue="",this.receiverElement.value=this.receiverValue="",this.handleFieldNames()}handleFieldNames(){this.senderValue?this.senderElement.name=this.senderElementName:this.senderElement.removeAttribute("name"),this.receiverValue?this.receiverElement.name=this.receiverElementName:this.receiverElement.removeAttribute("name")}get enabled(){return this.option.settings.giftSender||this.option.settings.giftReceiver}get displayFields(){return this.option.settings.giftSender&&this.option.settings.giftReceiver?"all":this.option.settings.giftSender?"sender":this.option.settings.giftReceiver?"receiver":"none"}get senderLabel(){const e=window.Shopify?.locale||"en",t=this.option.settings.giftSenderLabels;return t[e]||t.primary}get receiverLabel(){const e=window.Shopify?.locale||"en",t=this.option.settings.giftReceiverLabels;return t[e]||t.primary}get senderElement(){return this.querySelector('[part="sender"] input[type="text"]')}get receiverElement(){return this.querySelector('[part="receiver"] input[type="text"]')}get senderElementName(){return this.parentElement.fieldNameFor("sender")}get receiverElementName(){return this.parentElement.fieldNameFor("receiver")}}customElements.define("wrapped-feature-sender-receiver-simple",t)},863:function(e,t,r){"use strict";r.r(t);var i=r(709);const n=document.createElement("template");n.innerHTML='\n<div part="container">\n  <input type="hidden" part="name">\n  <input type="hidden" part="id">\n  <input type="hidden" part="bundle">\n</div>\n';class a extends HTMLElement{constructor(){super(...arguments),this.identifier="feature-variant-simple"}connectedCallback(){this.querySelector('[part="container"]')||(this.replaceChildren(n.content.cloneNode(!0)),this.setSelectedVariant(this.selectedVariantTitle),this.createPrimaryElement(),this.setDefaultAttributes(),this.setEventListeners())}setDefaultAttributes(){this.setAttribute("enabled",this.enabled),this.setAttribute("part","feature"),this.setAttribute("feature","variant"),this.setAttribute("selector-type",this.selectorType),this.provider.availableGiftVariants.length&&(this.block.target.formTarget&&(this.hiddenElement.setAttribute("form",this.block.target.formTarget),this.hiddenElementId.setAttribute("form",this.block.target.formTarget),this.hiddenElementBundle.setAttribute("form",this.block.target.formTarget)),this.handleFieldNames())}setEventListeners(){this.choiceElement.addEventListener("change",this.onDataChange.bind(this))}onDataChange(e){if(e.stopPropagation(),e.target.value===this.selectedVariantId)return;const t=this.provider.giftVariants.find((t=>t.node.id.split("/").pop()===e.target.value)).node,r=t.title,i=t.sku;this.setSelectedVariant(r),this.provider.isChecked="0"!==e.target.value,this.handleFieldNames(),this.dispatchEvent(new CustomEvent("property:changed",{bubbles:!0,composed:!0,detail:{checked:this.provider.isChecked,variant:r,sku:i}}))}resetInputs(){this.selectedVariantId=null,this.selectedVariantTitle=null,this.selectedVariantImage=null,this.hiddenElement.value=null,this.hiddenElementId.value=null,this.hiddenElementBundle.value=null,this.removeAttribute("selected-variant-id"),this.handleFieldNames()}handleFieldNames(){if("0"===this.selectedVariantId)return this.hiddenElement.removeAttribute("name"),this.hiddenElementId.removeAttribute("name"),void this.hiddenElementBundle.removeAttribute("name");this.selectedVariantTitle?this.hiddenElement.name=this.hiddenElementName:this.hiddenElement.removeAttribute("name"),this.selectedVariantId?(this.hiddenElementId.name=this.hiddenElementIdName,this.hiddenElementBundle.name=this.hiddenElementBundleName):(this.hiddenElementId.removeAttribute("name"),this.hiddenElementBundle.removeAttribute("name"))}setSelectedVariant(e){let t=this.provider.giftVariants.find((t=>t.node.title===e));t||(t=this.provider.giftVariants.find((e=>"gid://shopify/ProductVariant/0"===e.node.id))),t&&(this.selectedVariantId=t.node.id.split("/").pop(),this.selectedVariantTitle=t.node.title,this.selectedVariantImage=t.node.image?.url,"0"!==this.selectedVariantId&&(this.hiddenElement.value=t.node.title,this.hiddenElementId.value=t.node.id.split("/").pop(),this.hiddenElementBundle.value=this.bundleId),this.setAttribute("selected-variant-id",this.selectedVariantId),this.handleFieldNames())}setDefaultOption(){this.selectedVariantId||this.defaultGiftVariant&&(this.selectedVariantId=this.defaultGiftVariant?.node.id.split("/").pop(),this.selectedVariantTitle=this.defaultGiftVariant?.node.title,this.selectedVariantImage=this.defaultGiftVariant?.node.image?.url,this.hiddenElement.value=this.defaultGiftVariant?.node.title,this.hiddenElementId.value=this.defaultGiftVariant?.node.id.split("/").pop(),this.hiddenElementBundle.value=this.bundleId,this.setAttribute("selected-variant-id",this.selectedVariantId),"FIELDSET"===this.choiceElement.tagName&&(this.choiceElement.querySelector(`input[value="${this.selectedVariantId}"]`).checked=!0),this.handleFieldNames())}createPrimaryElement(){"menu"===this.selectorType?this.createPrimaryElementSelect():this.createPrimaryElementFieldset(),1===this.provider.giftVariants.length&&this.setAttribute("singular",!0)}createPrimaryElementSelect(){const e=document.createElement("select");this.provider.giftVariants.forEach((t=>{let r=t.node;const i=document.createElement("option");i.value=r.id.split("/").pop(),i.innerHTML=this.optionTitle(r),i.selected=this.isSelected(r),i.disabled=this.isOptionDisabled(r),i.setAttribute("data-available",r.availableForSale),i.setAttribute("data-filtered",this.provider.giftVariantHidden(r)),e.appendChild(i)})),this.containerElement.appendChild(e)}createPrimaryElementFieldset(){const e=document.createElement("fieldset"),t=`${window.crypto.randomUUID()}-${this.tagName.toLowerCase()}`;this.provider.giftVariants.forEach((r=>{let n=r.node;const a=document.createElement("label");a.setAttribute("data-variant-id",n.id.split("/").pop()),a.setAttribute("data-available",n.availableForSale),a.setAttribute("data-selected",this.isSelected(n)),a.setAttribute("data-filtered",this.provider.giftVariantHidden(n));const s=document.createElement("input");s.type="radio",s.value=n.id.split("/").pop(),s.name=t,s.checked=this.isSelected(n),s.disabled=this.isOptionDisabled(n),"images"!==this.selectorType&&"images-modern"!==this.selectorType||(s.style.backgroundImage=`url(${n.image?.url??this.option.product?.image})`),a.appendChild(s);const o=document.createElement("div");o.setAttribute("part","wrapper");const d=document.createElement("span");if(d.setAttribute("part","title"),d.innerHTML=n.title,o.appendChild(d),this.showPricing(n.price.amount)){const e=document.createElement("span");e.setAttribute("part","pricing"),e.innerHTML=i.i.formattedPrice(n.price.amount),o.appendChild(e)}a.appendChild(o),e.appendChild(a)})),this.containerElement.appendChild(e)}isSelected(e){return this.selectedVariantId===e.id.split("/").pop()}isOptionDisabled(e){return!!this.provider.orderLimitReached||!!this.provider.giftVariantHidden(e)||!e.availableForSale}optionTitle(e){return this.showPricing(e.price.amount)?`${e.title} ${i.i.formattedPrice(e.price.amount)}`:e.title}showPricing(e){return e>0?this.option.product?.variantPricingPaid:this.option.product?.variantPricingFree}get enabled(){return"advanced"===this.option.settings.optionMode&&void 0!==this.option.product&&this.provider.giftVariants.length>1}get defaultGiftVariant(){return this.provider.availableGiftVariants?.[0]}get hiddenCheckbox(){return!this.block.primaryCheckbox}get selectorType(){return this.block.variantAppearance}get containerElement(){return this.querySelector('div[part="container"]')}get hiddenElement(){return this.querySelector('input[type="hidden"][part="name"]')}get hiddenElementName(){return this.parentElement.fieldNameFor("variant")}get hiddenElementId(){return this.querySelector('input[type="hidden"][part="id"]')}get hiddenElementIdName(){return this.parentElement.fieldNameFor("variantId")}get hiddenElementBundle(){return this.querySelector('input[type="hidden"][part="bundle"]')}get hiddenElementBundleName(){return this.parentElement.fieldNameFor("bundler")}get choiceElement(){return this.querySelector("select")||this.querySelector("fieldset")}get productId(){return this.parentElement?.productId}get bundleId(){return this.parentElement?.bundleId}}customElements.define("wrapped-feature-variant-simple",a)},709:function(e,t,r){"use strict";r.d(t,{i:function(){return i}});const i={formattedPrice:e=>{const t=window.Shopify?.currency?.active||"USD",r=window.Shopify?.locale||"en",i=e;return new Intl.NumberFormat(r,{style:"currency",currency:t,currencyDisplay:"narrowSymbol"}).format(i)}}},819:function(e,t,r){"use strict";r.d(t,{H:function(){return s}});var i=r(520);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function a(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=(()=>{const e=()=>{const e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},window.Shopify?.theme);return delete e?.sections?.instances,e};return{send:t=>{if(window.Wrapped.settings.block&&!(t?.index>=1))try{(t=>{(0,i.tx)("beacon",`beacon: ${t.parentElement.providerKind}`);const r=t.parentElement.parentElement?.dataset;let n;const a=t.parentElement.providerKind===r?.position,s=t.parentElement.providerKind===r?.appBlock;a&&(n="data-position"),s&&(n="shopify-block"),!a&&!s&&(n="query-selector");const o=`wrapped-beacon-${t.block.id}`;if(!window.sessionStorage.getItem(o)||window.Shopify?.designMode){try{const r={method:"POST",headers:{"Content-Type":"application/json","x-gift-block-type":t.parentElement.providerKind,"x-gift-block-uuid":t.block.id},keepalive:!0,body:JSON.stringify({editor:window.Shopify?.designMode,version:window.Wrapped.version||"wrapped-0",block:{id:t.block.id,beacon_position_type:n,beacon_selector:t.block.target.selector,beacon_type:t.parentElement.providerKind},theme:{id:t.block.target.id,settings:window.Wrapped.settings.block,shopify:e()},shop:window.Shopify?.shop})};fetch("https://blocks.wrapped.alacartapps.co/production",r)}catch(e){console.error(e)}window.sessionStorage.setItem(o,"true")}})(t)}catch(e){console.error(e)}}}})()},740:function(e,t){"use strict";t.A={leaveBreadcrumb:(e,t)=>{},notify:(e,t)=>{}}},787:function(e,t,r){"use strict";r.d(t,{r:function(){return a}});var i=r(740),n=r(520);const a=(()=>{const e="storefront-api",t=window.Wrapped.settings.token;return{request:async(r,a)=>{try{const s=performance.now();return await fetch("/api/2024-10/graphql.json",{method:"POST",keepalive:!0,headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":t,"X-Wrapped":!0},body:JSON.stringify({query:r,variables:a})}).then((t=>t?t.ok?t.json():((0,n.tx)(e,`network error: ${t.status}`,t,"red"),i.A?.leaveBreadcrumb(`network error: ${t.status}`),{data:null,errors:null}):((0,n.tx)(e,"network timeout or unexpected response",null,"red"),i.A?.leaveBreadcrumb("network timeout or unexpected response"),{data:null,errors:null}))).then((t=>{let r=t.data,i=t.errors;const a=(performance.now()-s).toFixed(0);return(0,n.tx)(e,`completed in ${a}ms:`,{data:r,errors:i},"darkorange"),{data:r,errors:i}}))}catch(t){throw(0,n.tx)(e,`unexpected error: ${t.message}`,t,"red"),i.A?.notify(t,(e=>{e.groupingHash="StorefrontRequestError",e.addMetadata("errors",{message:t.message,operation:r,variables:a})})),t}}}})()},384:function(e,t,r){"use strict";r.d(t,{h:function(){return i},u:function(){return n}});class i extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(e),this.name="StorefrontQueryError",this.errors=t,this.graphql=r}}class n extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(e),this.name="StorefrontMutationError",this.errors=t,this.graphql=r}}},250:function(e,t,r){"use strict";r.d(t,{u:function(){return u}});var i=r(15),n=r(821),a=r(951);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}const u=(()=>{const e=(e,t)=>{const r=(a=e.split("."),s=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,o=[],d=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;d=!1}else for(;!(d=(i=a.call(r)).done)&&(o.push(i.value),o.length!==t);d=!0);}catch(e){c=!0,n=e}finally{try{if(!d&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw n}}return o}}(a,s)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(a,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=r[0],n=r[1];var a,s;return window.Wrapped?.options?.[i]?.datafields?.[n]??t},t={orderFragment:window.Wrapped?.options?.order?"\n      checkboxAttribute: attribute(key: $checkboxAttribute) {\n        value\n      }\n      variantAttribute: attribute(key: $variantAttribute) {\n        value\n      }\n      variantIdAttribute: attribute(key: $variantIdAttribute) {\n        value\n      }\n      senderAttribute: attribute(key: $senderAttribute) {\n        value\n      }\n      receiverAttribute: attribute(key: $receiverAttribute) {\n        value\n      }\n      messageAttribute: attribute(key: $messageAttribute) {\n        value\n      }\n    ".trim():"",productFragment:window.Wrapped?.options?.product?"\n      checkboxProperty: attribute(key: $checkboxProperty) {\n        value\n      }\n      variantProperty: attribute(key: $variantProperty) {\n        value\n      }\n      variantIdProperty: attribute(key: $variantIdProperty) {\n        value\n      }\n      senderProperty: attribute(key: $senderProperty) {\n        value\n      }\n      receiverProperty: attribute(key: $receiverProperty) {\n        value\n      }\n      messageProperty: attribute(key: $messageProperty) {\n        value\n      }\n      bundleProperty: attribute(key: $bundleProperty) {\n        value\n      }\n      blockProperty: attribute(key: $blockProperty) {\n        value\n      }\n    ".trim():"",definitions:["\n      $cartId: ID!,\n      $language: LanguageCode!,\n      $country: CountryCode!\n    ".trim(),window.Wrapped?.options?.order?"\n          $checkboxAttribute: String!,\n          $variantAttribute: String!,\n          $variantIdAttribute: String!,\n          $senderAttribute: String!,\n          $receiverAttribute: String!,\n          $messageAttribute: String!\n        ".trim():"",window.Wrapped?.options?.product?"\n          $checkboxProperty: String!,\n          $variantProperty: String!,\n          $variantIdProperty: String!,\n          $senderProperty: String!,\n          $receiverProperty: String!,\n          $messageProperty: String!,\n          $bundleProperty: String!,\n          $blockProperty: String!\n        ".trim():""].filter(Boolean).join(",\n  ")},r={language:(0,n.T)(window.Shopify?.locale??"EN"),country:(0,i.n)(window.Shopify?.country??"US"),checkboxAttribute:e("order.checkbox","Gift Wrap"),variantAttribute:e("order.variant","Gift Option"),variantIdAttribute:e("order.variantId","_Gift Option ID"),senderAttribute:e("order.sender","Gift Sender"),receiverAttribute:e("order.receiver","Gift Receiver"),messageAttribute:e("order.message","Gift Message"),checkboxProperty:e("product.checkbox","Gift Wrap"),variantProperty:e("product.variant","Gift Option"),variantIdProperty:e("product.variantId","_Gift Option ID"),senderProperty:e("product.sender","Gift Sender"),receiverProperty:e("product.receiver","Gift Receiver"),messageProperty:e("product.message","Gift Message"),bundleProperty:e("product.bundle","_Wrapped Bundle"),blockProperty:e("product.block","_Gift Block")};return{get orderFragment(){return t.orderFragment},get productFragment(){return t.productFragment},get variables(){return o(o({},r),{},{get cartId(){return a.T.cartId}})},get definitions(){return t.definitions}}})()},486:function(e,t,r){"use strict";r.d(t,{b:function(){return l}});var i=r(740),n=r(787),a=r(951),s=r(520),o=r(250),d=r(384);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=(()=>{const e="cart-query",t=`\n    fragment CartFragment on Cart {\n      id\n      attributes {\n        key\n        value\n      }\n      ${o.u.orderFragment}\n      lines(first: 250) {\n        edges {\n          node {\n            id\n            quantity\n            attributes {\n              key\n              value\n            }\n            ${o.u.productFragment}\n            merchandise {\n              ... on ProductVariant {\n                id\n                title\n                weight\n                weightUnit\n                product {\n                  id\n                  title\n                  tags\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  `;return{run:async()=>{try{if(!window.Wrapped.settings.token)return void(0,s.tx)(e,"token is required",void 0,"fuchsia");if(!a.T.cartId&&(await fetch(`${window.Shopify.routes.root}cart/update.js`),!a.T.cartId))return void(0,s.tx)(e,"cart not ready",void 0,"fuchsia");(0,s.tx)(e,"requesting...",void 0,"fuchsia"),i.A?.leaveBreadcrumb(e);const r=`\n      ${t}\n\n      query CartQuery(${o.u.definitions}) @inContext(language: $language, country: $country) {\n        cart(id: $cartId) {\n          ...CartFragment\n        }\n      }\n    `,l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o.u.variables);await n.r.request(r,l).then((e=>{let t=e.data,i=e.errors;if(i)throw new d.h(i?.[0]?.message,i,{operation:r,variables:l});a.T.save(t?.cart)}))}catch(t){throw(0,s.tx)(e,"failed:",t,"red"),t instanceof d.h&&i.A?.notify(t,(r=>(r.addMetadata("errors",t.errors),r.addMetadata("graphql",t.graphql),r.groupingHash=`${t.errorClass}-${e}`,100*Math.random()>1))),a.T.save({}),t}},fragment:t}})()},951:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});var i=r(520);const n=(()=>{const e="wrapped-cart";return{get cart(){return(()=>{const t={attributes:[],lines:{edges:[]}};try{return JSON.parse(localStorage.getItem(e))??t}catch(e){return t}})()},get cartId(){return(()=>{try{return`gid://shopify/Cart/${decodeURIComponent(document.cookie.match("(^|;)\\s*cart\\s*=\\s*([^;]+)")[2])}`}catch(e){return null}})()},save:t=>{(0,i.tx)("cart-session","saving cart session",t),t&&0!==Object.keys(t).length?localStorage.setItem(e,JSON.stringify(t)):localStorage.removeItem(e)}}})()},910:function(e,t,r){"use strict";r.d(t,{E:function(){return n}});var i=r(520);const n=(()=>{const e="gift-product-session",t="wrapped-gift-products",r=r=>{try{const e=JSON.parse(localStorage.getItem(t)??"{}");return e?.[r]}catch(t){return(0,i.tx)(e,"deserialization error",t,"red"),{}}};return{get forOrders(){return r("orderOption")},get forProducts(){return r("productOption")},get products(){return[r("orderOption"),r("productOption")].filter(Boolean)},save:r=>{(0,i.tx)(e,"saving gift products session",r),localStorage.setItem(t,JSON.stringify(r))}}})()},293:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});var i=r(520);const n=(()=>{const e="product-page-session",t=`wrapped-product-${window.Wrapped.selectedProductId}`;return{get product(){return(()=>{try{return JSON.parse(sessionStorage.getItem(t)??"{}")}catch(t){return(0,i.tx)(e,"deserialization error",t,"red"),{}}})()},save:r=>{(0,i.tx)(e,"saving product page session",r),sessionStorage.setItem(t,JSON.stringify(r))}}})()},632:function(e,t,r){"use strict";var i=r(819),n=r(520),a=r(951),s=r(740),o=r(250),d=r(787),c=r(486),u=r(384);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=(()=>{const e="select-mutation",t=(e,t,r)=>{if(r.slice(t+1).some((t=>t.key===e.key)))return null;const i=String(e.value??"");return i&&""!==i.trim()?e:null};return{run:async r=>{try{(0,n.KO)(e,"running mutation","fuchsia"),s.A?.leaveBreadcrumb(e);const i=(e=>{const t=Boolean(e.cartLineChild),r="advanced"===e.option.settings.optionMode&&!e.option.product?.bundles&&!t;return`\n      ${c.b.fragment}\n\n      mutation SelectMutation(\n        ${o.u.definitions}\n        ${r?"$cartLinesAdd: [CartLineInput!]!":""}\n        $cartLinesUpdate: [CartLineUpdateInput!]!\n      ) @inContext(language: $language, country: $country) {\n        ${r?"cartLinesAdd: cartLinesAdd(\n            cartId: $cartId\n            lines: $cartLinesAdd\n          ) {\n            userErrors {\n              field\n              message\n            }\n            warnings {\n              code\n              message\n              target\n            }\n          }\n          ":""}\n        cartLinesUpdate(\n          cartId: $cartId\n          lines: $cartLinesUpdate\n        ) {\n          cart {\n            ...CartFragment\n          }\n          userErrors {\n            field\n            message\n          }\n          warnings {\n            code\n            message\n            target\n          }\n        }\n      }\n    `})(r),l=(e=>{const r=Boolean(e.cartLineChild),i="advanced"===e.option.settings.optionMode&&!e.option.product?.bundles&&!r,n=p(p({},o.u.variables),{},{cartLinesUpdate:[{id:e.cartLine.node.id,attributes:[...e.cartLine.node.attributes??[],{key:e.datafields.checkbox,value:"yes"},{key:e.datafields.variant,value:String(e.variantFeature.selectedVariantTitle??"")},{key:e.datafields.variantId,value:String(e.variantFeature.selectedVariantId??"")},{key:e.datafields.message,value:String(e.messageFeature.messageValue)},{key:e.datafields.receiver,value:String(e.senderReceiverFeature.receiverValue)},{key:e.datafields.sender,value:String(e.senderReceiverFeature.senderValue)},{key:e.datafields.bundler,value:e.bundleId}].map(t).filter(Boolean)}]});return i?p(p({},n),{},{cartLinesAdd:[{merchandiseId:`gid://shopify/ProductVariant/${e.variantFeature.selectedVariantId}`,quantity:e.cartLine.node.quantity??1,attributes:[{key:e.datafields.bundler,value:e.bundleId}]}]}):r?p(p({},n),{},{cartLinesUpdate:[...n.cartLinesUpdate,{id:e.cartLineChild.node.id,merchandiseId:`gid://shopify/ProductVariant/${e.variantFeature.selectedVariantId}`,quantity:e.cartLineChild.node.quantity??1}]}):n})(r);return await d.r.request(i,l).then((t=>{let r=t.data,n=t.errors;if(n){const t=(n[0]?.extensions??{code:"NETWORK_ERROR"}).code;throw new u.u(`${t} in cart-line-${e}`,n,{operation:i,variables:l})}a.T.save(r?.cartLinesUpdate?.cart??{})}))}catch(t){(0,n.tx)(e,"failed:",t,"red"),s.A?.notify(t,(e=>{e.addMetadata("errors",t.errors),e.addMetadata("graphql",t.graphql),e.addMetadata("provider",r)})),window.Wrapped.buildExtensions()}finally{(0,n.mQ)(e)}}}})();function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const v=(()=>{const e="deselect-mutation",t=(e,t,r)=>{if(r.slice(t+1).some((t=>t.key===e.key)))return null;const i=String(e.value??"");return i&&""!==i.trim()?e:null};return{run:async r=>{try{(0,n.KO)(e,"running mutation","fuchsia"),s.A?.leaveBreadcrumb(e);const i=(e=>{const t=Boolean(e.cartLineChild);return`\n      ${c.b.fragment}\n\n      mutation SelectMutation(\n        ${o.u.definitions}\n        ${t?"$lineIds: [ID!]!":""}\n        $cartLinesUpdate: [CartLineUpdateInput!]!\n      ) @inContext(language: $language, country: $country) {\n        ${t?"linesRemove: cartLinesRemove(\n              cartId: $cartId\n              lineIds: $lineIds\n            ) {\n              userErrors {\n                field\n                message\n              }\n              warnings {\n                code\n                message\n                target\n              }\n            }\n            ":""}\n        cartLinesUpdate(\n          cartId: $cartId\n          lines: $cartLinesUpdate\n        ) {\n          cart {\n            ...CartFragment\n          }\n          userErrors {\n            field\n            message\n          }\n          warnings {\n            code\n            message\n            target\n          }\n        }\n      }\n    `})(r),l=(e=>{const r=Boolean(e.cartLineChild),i=g(g({},o.u.variables),{},{cartLinesUpdate:[{id:e.cartLine.node.id,attributes:[...e.cartLine.node.attributes??[],{key:e.datafields.checkbox,value:null},{key:e.datafields.variant,value:null},{key:e.datafields.variantId,value:null},{key:e.datafields.message,value:null},{key:e.datafields.receiver,value:null},{key:e.datafields.sender,value:null},{key:e.datafields.bundler,value:null}].map(t).filter(Boolean)}]});return r?g(g({},i),{},{lineIds:[e.cartLineChild.node.id]}):i})(r);return await d.r.request(i,l).then((t=>{let r=t.data,n=t.errors;if(n){const t=(n[0]?.extensions??{code:"NETWORK_ERROR"}).code;throw new u.u(`${t} in cart-line-${e}`,n,{operation:i,variables:l})}a.T.save(r?.cartLinesUpdate?.cart??{})}))}catch(t){(0,n.tx)(e,"failed:",t,"red"),s.A?.notify(t,(e=>{e.addMetadata("errors",t.errors),e.addMetadata("graphql",t.graphql),e.addMetadata("provider",r)})),window.Wrapped.buildExtensions()}finally{(0,n.mQ)(e)}}}})();var y=r(930);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E=(()=>{const e="save-text-mutation",t=(e,t,r)=>{if(r.slice(t+1).some((t=>t.key===e.key)))return null;const i=String(e.value??"");return i&&""!==i.trim()?e:null};return{run:(0,y.s)((async r=>{try{(0,n.KO)(e,"running mutation","fuchsia"),s.A?.leaveBreadcrumb(e,"running mutation");const i=`\n      ${c.b.fragment}\n\n      mutation SaveTextMutation(\n        ${o.u.definitions}\n        $cartLinesUpdate: [CartLineUpdateInput!]!\n      ) @inContext(language: $language, country: $country) {\n        cartLinesUpdate(\n          cartId: $cartId\n          lines: $cartLinesUpdate\n        ) {\n          cart {\n            ...CartFragment\n          }\n          userErrors {\n            field\n            message\n          }\n          warnings {\n            code\n            message\n            target\n          }\n        }\n      }\n    `,l=(e=>O(O({},o.u.variables),{},{cartLinesUpdate:[{id:e.cartLine.node.id,attributes:[...e.cartLine.node.attributes??[],{key:e.datafields.message,value:String(e.messageFeature.messageValue)},{key:e.datafields.receiver,value:String(e.senderReceiverFeature.receiverValue)},{key:e.datafields.sender,value:String(e.senderReceiverFeature.senderValue)}].map(t).filter(Boolean)}]}))(r);return await d.r.request(i,l).then((t=>{let r=t.data,n=t.errors;if(n){const t=(n[0]?.extensions??{code:"NETWORK_ERROR"}).code;throw new u.u(`${t} in cart-line-${e}`,n,{operation:i,variables:l})}a.T.save(r?.cartLinesUpdate?.cart??{})}))}catch(t){(0,n.tx)(e,"failed:",t,"red"),s.A?.notify(t,(e=>{e.addMetadata("errors",t.errors),e.addMetadata("graphql",t.graphql),e.addMetadata("provider",r)})),window.Wrapped.buildExtensions()}finally{(0,n.mQ)(e)}}),300)}})();var P=r(910);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j extends HTMLElement{constructor(){super(...arguments),this.identifier="cart-line"}connectedCallback(){this.isRenderBlocked()||((0,n.KO)(`${this.identifier} - ${this.index}`),(0,n.tx)(this.identifier,`connected - ${this.index}`,this),(0,n.tx)(this.identifier,"properties:",this.cartLineAttributes),(0,n.mQ)(`%c${this.identifier} - ${this.index}`),i.H.send(this),this.appendChild(this.checkboxFeature),this.appendChild(this.variantFeature),this.appendChild(this.senderReceiverFeature),this.appendChild(this.messageFeature),this.appendChild(this.poweredByFeature),this.addEventListener("property:changed",this.propertyChangedListener.bind(this)),this.setDefaultAttributes())}disconnectedCallback(){this._cartLineId=void 0,(0,n.tx)(this.identifier,`disconnected - ${this.index}`)}isRenderBlocked(){return void 0===a.T.cart.lines.edges[this.index]?((0,n.tx)(this.identifier,`cart is empty or index boundary - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("is-hidden",!0),!0):this.isGiftOption?((0,n.tx)(this.identifier,`gift option - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("is-gift-option",!0),this.setAttribute("is-hidden",!0),!0):this.giftVariantsUnavailable?((0,n.tx)(this.identifier,`all gift variants unavailable - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("gift-variants-unavailable",!0),this.setAttribute("is-hidden",!0),!0):!!this.giftBlockHidden&&((0,n.tx)(this.identifier,`hidden - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("is-filtered",!0),this.setAttribute("is-hidden",!0),!0)}setDefaultAttributes(){this.setAttribute("part","provider"),this.setAttribute("is-checked",this.isChecked),this.setAttribute("product-id",this.productId),this.setAttribute("variant-id",this.variantId),this.setAttribute("hidden-checkbox",this.hiddenCheckbox),this.setAttribute("has-gift-variants",this.hasGiftVariants),this.setAttribute("bundle-id",this.bundleId),this.ordersLimitReached&&this.setAttribute("limited",!0)}async propertyChangedListener(e){if(!this.cartLine)return(0,n.tx)(this.identifier,"cart line missing: does not exist or was already removed"),void window.location.reload();switch(this.purple&&(this.isChecked=!1,this.checkboxFeature.resetInputs(),this.variantFeature.resetInputs(),this.messageFeature.resetInputs(),this.senderReceiverFeature.resetInputs()),this.isChecked&&this.availableGiftVariants?.length&&this.variantFeature.setDefaultOption(),this.checkboxFeature.createGiftThumbail(),e.detail.checked){case!0:this.setAttribute("saving",!0),await f.run(this).finally(this.triggerAction.bind(this));break;case!1:this.setAttribute("saving",!0),await v.run(this).finally(this.triggerAction.bind(this));break;default:E.run(this)}}get purple(){return!this.block.primaryCheckbox&&this.isChecked?!(this.variantFeature.selectedVariantTitle||this.messageFeature.messageValue||this.senderReceiverFeature.senderValue||this.senderReceiverFeature.receiverValue):!1===this.isChecked}triggerAction(){switch("event"===this.block.target.actionTypeDeveloper&&this.actionEventDeveloper(),this.block.target.actionType){case"event":this.actionEvent();break;case"function":this.actionFunction()}this.block.refresh?this.actionReload():this.removeAttribute("saving")}actionReload(){(0,n.tx)(this.identifier,"action: reload"),window.location.reload()}actionEvent(){(0,n.tx)(this.identifier,"action: event");const e=new CustomEvent(this.block.target.action);document.dispatchEvent(e),document.documentElement.dispatchEvent(e)}actionEventDeveloper(){(0,n.tx)(this.identifier,"developer action: event");const e=new CustomEvent(this.block.target.actionDeveloper);document.dispatchEvent(e),document.documentElement.dispatchEvent(e)}actionFunction(){(0,n.tx)(this.identifier,"action: function");try{Function(`"use strict"; return (${this.block.target.action})`)()}catch(e){console.error("Wrapped: callback function error",e)}}fieldNameFor(e){return this.datafields[e]?`properties[${this.index}][${this.datafields[e]}]`:void 0}giftVariantHidden(e){const t=`${this.option.settings.visibilityTag}:${e.id.split("/").pop()}`;return this.cartLine.node.merchandise.product.tags.includes(t)}get giftVariants(){if("basic"===this.option.settings.optionMode)return[];const e=e=>{const t=!e.availableForSale,r=this.option.product?.hiddenInventory;return t&&r},t=e=>{const t=this.giftVariantHidden(e),r=this.option.product?.hiddenVisibility;return t&&r};let r=P.E.forProducts?.variants?.edges??[];if(r=r.filter((r=>{let i=r.node;return!e(i)&&!t(i)})),!this.option.settings.multipleGiftVariants)return[r.find((e=>e.node.availableForSale))].filter(Boolean);if(this.hiddenCheckbox){const e=(()=>{const e=window.Shopify?.locale||"en",t=this.block.labels,r=this.option.settings.giftCheckboxLabels;return t[e]||r[e]||t.primary||r.primary})();r=[{node:{id:"gid://shopify/ProductVariant/0",availableForSale:!0,price:{amount:0,currencyCode:window.Shopify?.currency?.active??"USD"},title:e,image:{url:this.option.product?.image?this.option.product.image:null}}},...r]}return r}get availableGiftVariants(){let e=this.giftVariants??[];return e=e.filter((e=>e.node.availableForSale)),e=e.filter((e=>{let t=e.node;return!this.giftVariantHidden(t)})),e=e.filter((e=>"gid://shopify/ProductVariant/0"!==e.node.id)),e}get checkboxFeature(){return this._checkboxFeature||(this._checkboxFeature=Object.assign(document.createElement("wrapped-feature-checkbox-simple"),{provider:this,option:this.option,block:this.block})),this._checkboxFeature}get variantFeature(){return this._variantFeature||(this._variantFeature=Object.assign(document.createElement("wrapped-feature-variant-simple"),{provider:this,option:this.option,block:this.block,selectedVariantTitle:this.cartLine.node.variantProperty?.value||""})),this._variantFeature}get senderReceiverFeature(){return this._senderReceiverFeature||(this._senderReceiverFeature=Object.assign(document.createElement("wrapped-feature-sender-receiver-simple"),{provider:this,option:this.option,block:this.block,senderValue:this.cartLine.node.senderProperty?.value||"",receiverValue:this.cartLine.node.receiverProperty?.value||""})),this._senderReceiverFeature}get messageFeature(){return this._messageFeature||(this._messageFeature=Object.assign(document.createElement("wrapped-feature-message-simple"),{provider:this,option:this.option,block:this.block,messageValue:this.cartLine.node.messageProperty?.value||""})),this._messageFeature}get poweredByFeature(){return this._poweredByFeature||(this._poweredByFeature=Object.assign(document.createElement("wrapped-feature-powered-by-simple"),{provider:this,option:this.option,block:this.block})),this._poweredByFeature}get isChecked(){return void 0===this._isChecked&&(this.isChecked="yes"===this.cartLine.node.checkboxProperty?.value),this._isChecked}set isChecked(e){this.setAttribute("is-checked",e),this._isChecked=e,this.checkboxFeature.isChecked=e}get ordersLimitReached(){return!window.Wrapped.settings.token||this.option.settings.ordersLimitReached||!1}get hiddenCheckbox(){return!1===this.block.primaryCheckbox&&!this.ordersLimitReached}get datafields(){return A(A({},this.option.datafields),{},{variantId:"_Gift Option ID",bundler:"_Wrapped Bundle"})}get cartLine(){return this._cartLineId||(this._cartLineId=a.T.cart.lines.edges[this.index]?.node?.id??void 0),a.T.cart.lines.edges.find((e=>e.node.id===this._cartLineId))}get cartLineChild(){return"basic"===this.option.settings.optionMode||this.option.product?.bundles?null:a.T.cart.lines.edges.find((e=>{let t=e.node;return t.id!==this.cartLine.node.id&&t.bundleProperty?.value===this.bundleId}))||null}get cartLineAttributes(){const e=Object.values(this.datafields);return this.cartLine.node.attributes.reduce(((t,r)=>e.includes(r.key)?(t[r.key]=r.value,t):t),{})}get productId(){return this.cartLine.node.merchandise.product.id.split("/").pop()||0}get variantId(){return this.cartLine.node.merchandise.id.split("/").pop()||0}get bundleId(){return this._bundleId||(this._bundleId=this.cartLine.node.bundleProperty?.value||window.crypto?.randomUUID().substring(0,8)),this._bundleId}get hasGiftVariants(){return"basic"!==this.option.settings.optionMode&&P.E.forProducts?.variants?.edges?.length>0}get giftVariantsUnavailable(){return!!this.hasGiftVariants&&!this.availableGiftVariants.length}get isGiftOption(){return P.E.products.map((e=>e.id.split("/").pop())).includes(this.productId)}get giftBlockHidden(){return this.cartLine.node.merchandise.product.tags.includes(this.option.settings.visibilityTag)}}customElements.define("wrapped-cart-line-provider",j)},405:function(e,t,r){"use strict";var i=r(819),n=r(520),a=r(951),s=r(740),o=r(250),d=r(787),c=r(486),u=r(384);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=(()=>{const e="select-mutation",t=(e,t,r)=>{if(r.slice(t+1).some((t=>t.key===e.key)))return null;const i=String(e.value??"");return i&&""!==i.trim()?e:null};return{run:async r=>{try{(0,n.KO)(e,"running mutation","fuchsia"),s.A?.leaveBreadcrumb(e);const i=(e=>{const t=Boolean(e.cartLineChild),r="advanced"===e.option.settings.optionMode&&!t;return`\n      ${c.b.fragment}\n\n      mutation SelectMutation(\n        ${o.u.definitions}\n        ${r?"$lines: [CartLineInput!]!":""}\n        ${t?"$lines: [CartLineUpdateInput!]!":""}\n        $attributes: [AttributeInput!]!\n      ) @inContext(language: $language, country: $country) {\n        ${r?"linesAdd: cartLinesAdd(\n              cartId: $cartId\n              lines: $lines\n            ) {\n              userErrors {\n                field\n                message\n              }\n              warnings {\n                code\n                message\n                target\n              }\n            }\n            ":""}\n        ${t?"linesUpdate: cartLinesUpdate(\n              cartId: $cartId\n              lines: $lines\n            ) {\n              userErrors {\n                field\n                message\n              }\n              warnings {\n                code\n                message\n                target\n              }\n            }\n            ":""}\n        attributesUpdate: cartAttributesUpdate(\n          cartId: $cartId\n          attributes: $attributes\n        ) {\n          cart {\n            ...CartFragment\n          }\n          userErrors {\n            field\n            message\n          }\n          warnings {\n            code\n            message\n            target\n          }\n        }\n      }\n    `})(r),l=(e=>{const r=Boolean(e.cartLineChild),i="advanced"===e.option.settings.optionMode&&!r,n=p(p({},o.u.variables),{},{attributes:[...a.T.cart.attributes??[],{key:e.datafields.checkbox,value:"yes"},{key:e.datafields.variant,value:String(e.variantFeature.selectedVariantTitle??"")},{key:e.datafields.variantId,value:String(e.variantFeature.selectedVariantId??"")},{key:e.datafields.message,value:String(e.messageFeature.messageValue)},{key:e.datafields.receiver,value:String(e.senderReceiverFeature.receiverValue)},{key:e.datafields.sender,value:String(e.senderReceiverFeature.senderValue)}].map(t).filter(Boolean)});return i?p(p({},n),{},{lines:[{merchandiseId:`gid://shopify/ProductVariant/${e.variantFeature.selectedVariantId}`,quantity:1}]}):r?p(p({},n),{},{lines:[{id:e.cartLineChild.node.id,merchandiseId:`gid://shopify/ProductVariant/${e.variantFeature.selectedVariantId}`,quantity:e.cartLineChild.node.quantity??1}]}):n})(r);return await d.r.request(i,l).then((t=>{let r=t.data,n=t.errors;if(n){const t=(n[0]?.extensions??{code:"NETWORK_ERROR"}).code;throw new u.u(`${t} in cart-list-${e}`,n,{operation:i,variables:l})}a.T.save(r?.attributesUpdate?.cart??{})}))}catch(t){(0,n.tx)(e,"failed:",t,"red"),s.A?.notify(t,(e=>{e.addMetadata("errors",t.errors),e.addMetadata("graphql",t.graphql),e.addMetadata("provider",r)})),window.Wrapped.buildExtensions()}finally{(0,n.mQ)(e)}}}})();function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const v=(()=>{const e="deselect-mutation",t=(e,t,r)=>{if(r.slice(t+1).some((t=>t.key===e.key)))return null;const i=String(e.value??"");return i&&""!==i.trim()?e:null};return{run:async r=>{try{(0,n.KO)(e,"running mutation","fuchsia"),s.A?.leaveBreadcrumb(e);const i=(e=>{const t=Boolean(e.cartLineChild);return`\n      ${c.b.fragment}\n\n      mutation SelectMutation(\n        ${o.u.definitions}\n        ${t?"$lineIds: [ID!]!":""}\n        $attributes: [AttributeInput!]!\n      ) @inContext(language: $language, country: $country) {\n        ${t?"linesRemove: cartLinesRemove(\n              cartId: $cartId\n              lineIds: $lineIds\n            ) {\n              userErrors {\n                field\n                message\n              }\n              warnings {\n                code\n                message\n                target\n              }\n            }\n            ":""}\n        attributesUpdate: cartAttributesUpdate(\n          cartId: $cartId\n          attributes: $attributes\n        ) {\n          cart {\n            ...CartFragment\n          }\n          userErrors {\n            field\n            message\n          }\n          warnings {\n            code\n            message\n            target\n          }\n        }\n      }\n    `})(r),l=(e=>{const r=Boolean(e.cartLineChild),i=g(g({},o.u.variables),{},{attributes:[...a.T.cart.attributes??[],{key:e.datafields.checkbox,value:null},{key:e.datafields.variant,value:null},{key:e.datafields.variantId,value:null},{key:e.datafields.message,value:null},{key:e.datafields.receiver,value:null},{key:e.datafields.sender,value:null}].map(t).filter(Boolean)});return r?g(g({},i),{},{lineIds:[e.cartLineChild.node.id]}):i})(r);return await d.r.request(i,l).then((t=>{let r=t.data,n=t.errors;if(n){const t=(n[0]?.extensions??{code:"NETWORK_ERROR"}).code;throw new u.u(`${t} in cart-list-${e}`,n,{operation:i,variables:l})}a.T.save(r?.attributesUpdate?.cart??{})}))}catch(t){(0,n.tx)(e,"failed:",t,"red"),s.A?.notify(t,(e=>{e.addMetadata("errors",t.errors),e.addMetadata("graphql",t.graphql),e.addMetadata("provider",r)})),window.Wrapped.buildExtensions()}finally{(0,n.mQ)(e)}}}})();var y=r(930);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E=(()=>{const e="save-text-mutation",t=(e,t,r)=>{if(r.slice(t+1).some((t=>t.key===e.key)))return null;const i=String(e.value??"");return i&&""!==i.trim()?e:null};return{run:(0,y.s)((async r=>{try{(0,n.KO)(e,"running mutation","fuchsia"),s.A?.leaveBreadcrumb(e,"running mutation");const i=(e=>{const t=Boolean(e.cartLineChild);return`\n      ${c.b.fragment}\n\n      mutation SaveTextMutation(\n        ${o.u.definitions}\n        ${t?"$lines: [CartLineUpdateInput!]!":""}\n        $attributes: [AttributeInput!]!\n      ) @inContext(language: $language, country: $country) {\n        ${t?"linesUpdate: cartLinesUpdate(\n              cartId: $cartId\n              lines: $lines\n            ) {\n              userErrors {\n                field\n                message\n              }\n              warnings {\n                code\n                message\n                target\n              }\n            }":""}\n        attributesUpdate: cartAttributesUpdate(\n          cartId: $cartId\n          attributes: $attributes\n        ) {\n          cart {\n            ...CartFragment\n          }\n          userErrors {\n            field\n            message\n          }\n          warnings {\n            code\n            message\n            target\n          }\n        }\n      }\n    `})(r),l=(e=>{const r=Boolean(e.cartLineChild),i=O(O({},o.u.variables),{},{attributes:[...a.T.cart.attributes??[],{key:e.datafields.message,value:String(e.messageFeature.messageValue)},{key:e.datafields.receiver,value:String(e.senderReceiverFeature.receiverValue)},{key:e.datafields.sender,value:String(e.senderReceiverFeature.senderValue)}].map(t).filter(Boolean)});return r?O(O({},i),{},{lines:[{id:e.cartLineChild.node.id,attributes:[...e.cartLineChild.node.attributes??[],{key:e.datafields.message,value:String(e.messageFeature.messageValue)},{key:e.datafields.receiver,value:String(e.senderReceiverFeature.receiverValue)},{key:e.datafields.sender,value:String(e.senderReceiverFeature.senderValue)}].map(t).filter(Boolean)}]}):i})(r);return await d.r.request(i,l).then((t=>{let r=t.data,n=t.errors;if(n){const t=(n[0]?.extensions??{code:"NETWORK_ERROR"}).code;throw new u.u(`${t} in cart-list-${e}`,n,{operation:i,variables:l})}a.T.save(r?.attributesUpdate?.cart??{})}))}catch(t){(0,n.tx)(e,"failed:",t,"red"),s.A?.notify(t,(e=>{e.addMetadata("errors",t.errors),e.addMetadata("graphql",t.graphql),e.addMetadata("provider",r)})),window.Wrapped.buildExtensions()}finally{(0,n.mQ)(e)}}),300)}})();var P=r(910);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j extends HTMLElement{constructor(){super(...arguments),this.identifier="cart-list"}connectedCallback(){this.isRenderBlocked()||((0,n.KO)(`${this.identifier} - ${this.index}`),(0,n.tx)(this.identifier,`connected - ${this.index}`,this),(0,n.tx)(this.identifier,"attributes:",this.cartAttributes),(0,n.mQ)(`%c${this.identifier} - ${this.index}`),i.H.send(this),this.appendChild(this.checkboxFeature),this.appendChild(this.variantFeature),this.appendChild(this.senderReceiverFeature),this.appendChild(this.messageFeature),this.appendChild(this.poweredByFeature),this.addEventListener("property:changed",this.propertyChangedListener.bind(this)),this.setDefaultAttributes())}disconnectedCallback(){(0,n.tx)(this.identifier,`disconnected - ${this.index}`)}isRenderBlocked(){return!a.T.cart.lines?.edges?.length||this.index>0?((0,n.tx)(this.identifier,`cart is empty or index boundary - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("is-hidden",!0),!0):this.giftVariantsUnavailable?((0,n.tx)(this.identifier,`all gift variants unavailable - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("gift-variants-unavailable",!0),this.setAttribute("is-hidden",!0),!0):!!this.allCartLinesHidden&&((0,n.tx)(this.identifier,`hiddeen - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("is-filtered",!0),this.setAttribute("is-hidden",!0),!0)}setDefaultAttributes(){this.setAttribute("part","provider"),this.setAttribute("is-checked",this.isChecked),this.setAttribute("hidden-checkbox",this.hiddenCheckbox),this.setAttribute("has-gift-variants",this.hasGiftVariants),this.ordersLimitReached&&this.setAttribute("limited",!0)}async propertyChangedListener(e){switch(this.purple&&(this.isChecked=!1,this.checkboxFeature.resetInputs(),this.variantFeature.resetInputs(),this.messageFeature.resetInputs(),this.senderReceiverFeature.resetInputs()),this.isChecked&&this.availableGiftVariants?.length&&this.variantFeature.setDefaultOption(),this.checkboxFeature.createGiftThumbail(),e.detail.checked){case!0:this.setAttribute("saving",!0),await f.run(this).finally(this.triggerAction.bind(this));break;case!1:this.setAttribute("saving",!0),await v.run(this).finally(this.triggerAction.bind(this));break;default:E.run(this)}}get purple(){return this.isChecked&&this.hiddenCheckbox?!(this.variantFeature.selectedVariantTitle||this.messageFeature.messageValue||this.senderReceiverFeature.senderValue||this.senderReceiverFeature.receiverValue):!1===this.isChecked}triggerAction(){switch("event"===this.block.target.actionTypeDeveloper&&this.actionEventDeveloper(),this.block.target.actionType){case"event":this.actionEvent();break;case"function":this.actionFunction()}this.block.refresh?this.actionReload():this.removeAttribute("saving")}actionReload(){(0,n.tx)(this.identifier,"action: reload"),window.location.reload()}actionEvent(){(0,n.tx)(this.identifier,"action: event");const e=new CustomEvent(this.block.target.action);document.dispatchEvent(e),document.documentElement.dispatchEvent(e)}actionEventDeveloper(){(0,n.tx)(this.identifier,"developer action: event");const e=new CustomEvent(this.block.target.actionDeveloper);document.dispatchEvent(e),document.documentElement.dispatchEvent(e)}actionFunction(){(0,n.tx)(this.identifier,"action: function");try{Function(`"use strict"; return (${this.block.target.action})`)()}catch(e){console.error("Wrapped: callback function error",e)}}actionNoop(){(0,n.tx)(this.identifier,"action: noop"),this.setAttribute("selected-variant-id",this.variantFeature.selectedVariantId)}fieldNameFor(e){return this.datafields[e]?`attributes[${this.datafields[e]}]`:void 0}giftVariantHidden(e){const t=`${this.option.settings.visibilityTag}:${e.id.split("/").pop()}`;return a.T.cart.lines.edges?.some((e=>e.node.merchandise.product.tags.includes(t)))}get giftVariants(){if("basic"===this.option.settings.optionMode)return[];const e=e=>{const t=!e.availableForSale,r=this.option.product?.hiddenInventory;return t&&r},t=e=>{const t=this.giftVariantHidden(e),r=this.option.product?.hiddenVisibility;return t&&r};let r=P.E.forOrders?.variants?.edges??[];if(r=r.filter((r=>{let i=r.node;return!e(i)&&!t(i)})),!this.option.settings.multipleGiftVariants)return[r.find((e=>e.node.availableForSale))].filter(Boolean);if(this.hiddenCheckbox){const e=(()=>{const e=window.Shopify?.locale||"en",t=this.block.labels,r=this.option.settings.giftCheckboxLabels;return t[e]||r[e]||t.primary||r.primary})();r=[{node:{id:"gid://shopify/ProductVariant/0",availableForSale:!0,price:{amount:0,currencyCode:window.Shopify?.currency?.active??"USD"},title:e,image:{url:this.option.product?.image?this.option.product.image:null}}},...r]}return r}get availableGiftVariants(){let e=this.giftVariants??[];return e=e.filter((e=>e.node.availableForSale)),e=e.filter((e=>{let t=e.node;return!this.giftVariantHidden(t)})),e=e.filter((e=>"gid://shopify/ProductVariant/0"!==e.node.id)),e}get checkboxFeature(){return this._checkboxFeature||(this._checkboxFeature=Object.assign(document.createElement("wrapped-feature-checkbox-simple"),{provider:this,option:this.option,block:this.block})),this._checkboxFeature}get variantFeature(){return this._variantFeature||(this._variantFeature=Object.assign(document.createElement("wrapped-feature-variant-simple"),{provider:this,option:this.option,block:this.block,selectedVariantTitle:a.T.cart.variantAttribute?.value||""})),this._variantFeature}get senderReceiverFeature(){return this._senderReceiverFeature||(this._senderReceiverFeature=Object.assign(document.createElement("wrapped-feature-sender-receiver-simple"),{provider:this,option:this.option,block:this.block,senderValue:a.T.cart.senderAttribute?.value||"",receiverValue:a.T.cart.receiverAttribute?.value||""})),this._senderReceiverFeature}get messageFeature(){return this._messageFeature||(this._messageFeature=Object.assign(document.createElement("wrapped-feature-message-simple"),{provider:this,option:this.option,block:this.block,messageValue:a.T.cart.messageAttribute?.value||""})),this._messageFeature}get poweredByFeature(){return this._poweredByFeature||(this._poweredByFeature=Object.assign(document.createElement("wrapped-feature-powered-by-simple"),{provider:this,option:this.option,block:this.block})),this._poweredByFeature}get isChecked(){return void 0===this._isChecked&&(this.isChecked="yes"===a.T.cart.checkboxAttribute?.value),this._isChecked}set isChecked(e){this.setAttribute("is-checked",e),this._isChecked=e,this.checkboxFeature.isChecked=e}get ordersLimitReached(){return!window.Wrapped.settings.token||this.option.settings.ordersLimitReached||!1}get hiddenCheckbox(){return!1===this.block.primaryCheckbox&&!this.ordersLimitReached}get datafields(){return A(A({},this.option.datafields),{},{variantId:"_Gift Option ID"})}get cartLineChild(){return"basic"===this.option.settings.optionMode?null:a.T.cart.lines.edges.find((e=>{let t=e.node;return!t.bundleProperty&&t.merchandise.id.split("/").pop()===String(a.T.cart.variantIdAttribute?.value)}))||null}get cartAttributes(){const e=Object.values(this.datafields);return a.T.cart.attributes.reduce(((t,r)=>e.includes(r.key)?(t[r.key]=r.value,t):t),{})}get hasGiftVariants(){return"basic"!==this.option.settings.optionMode&&P.E.forOrders?.variants?.edges?.length>0}get giftVariantsUnavailable(){return!!this.hasGiftVariants&&!this.availableGiftVariants.length}get allCartLinesHidden(){return a.T.cart.lines.edges.every((e=>e.node.merchandise.product.tags.includes(this.option.settings.visibilityTag)))}}customElements.define("wrapped-cart-list-provider",j)},641:function(e,t,r){"use strict";r.r(t);var i=r(819),n=r(520),a=r(910),s=r(293);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends HTMLElement{constructor(){super(...arguments),this.identifier="product"}async connectedCallback(){this.isRenderBlocked()||((0,n.tx)(this.identifier,`connected - ${this.index}`,this),i.H.send(this),this.verifyFormTarget(),this.appendChild(this.checkboxFeature),this.appendChild(this.variantFeature),this.appendChild(this.senderReceiverFeature),this.appendChild(this.messageFeature),this.appendChild(this.poweredByFeature),this.addEventListener("property:changed",this.propertyChangedListener.bind(this)),this.setDefaultAttributes())}disconnectedCallback(){(0,n.tx)(this.identifier,`disconnected - ${this.index}`)}isRenderBlocked(){return this.index>0?((0,n.tx)(this.identifier,`index boundary - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("is-hidden",!0),!0):window.location.pathname.match("/products")?this.productLine?this.isGiftOption?((0,n.tx)(this.identifier,`gift option - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("is-gift-option",!0),this.setAttribute("is-hidden",!0),!0):this.giftVariantsUnavailable?((0,n.tx)(this.identifier,`all gift variants unavailable - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("gift-variants-unavailable",!0),this.setAttribute("is-hidden",!0),!0):!!this.giftBlockHidden&&((0,n.tx)(this.identifier,`hidden - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("is-filtered",!0),this.setAttribute("is-hidden",!0),!0):((0,n.tx)(this.identifier,`product line missing - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("is-hidden",!0),!0):((0,n.tx)(this.identifier,`must be on product page - ${this.index}`),this.setAttribute("part","provider"),this.setAttribute("is-hidden",!0),!0)}verifyFormTarget(){if(this.block.target.formTarget)return;if(this.closest('form[action*="/cart/add"]'))return;const e=document.querySelector('form[action*="/cart/add"]:has(input[type="hidden"][name="id"]):has([type="submit"][name="add"])')||document.querySelector('form[action*="/cart/add"]:has(input[type="hidden"][name="id"]):has([type="submit"])')||document.querySelector('form[action*="/cart/add"]:has(input[type="hidden"][name="form_type"][value="product"]):has([type="submit"])')||document.querySelector('form[action*="/cart/add"]:has(input[type="hidden"][name="form_type"][value="product"])');e&&(e.getAttribute("id")||e.setAttribute("id","wrapped-product-form"),this.block.target.formTarget=e.getAttribute("id"))}setDefaultAttributes(){this.setAttribute("part","provider"),this.setAttribute("is-checked",this.isChecked),this.setAttribute("product-id",this.productId),this.setAttribute("variant-id",this.variantId),this.setAttribute("hidden-checkbox",this.hiddenCheckbox),this.setAttribute("has-gift-variants",this.hasGiftVariants),this.setAttribute("bundle-id",this.bundleId),this.setAttribute("bundles",this.option.product?.bundles),this.ordersLimitReached&&this.setAttribute("limited",!0)}propertyChangedListener(e){switch(this.purple&&(this.isChecked=!1,this.checkboxFeature.resetInputs(),this.variantFeature.resetInputs(),this.messageFeature.resetInputs(),this.senderReceiverFeature.resetInputs()),this.isChecked&&this.availableGiftVariants?.length&&this.variantFeature.setDefaultOption(),this.checkboxFeature.createGiftThumbail(),e.detail.checked){case!0:this.optionallyAddBlockInput().finally(this.triggerAction.bind(this));break;case!1:this.optionallyRemoveBlockInput().finally(this.triggerAction.bind(this))}}get purple(){return this.isChecked&&this.hiddenCheckbox?!(this.variantFeature.selectedVariantTitle||this.messageFeature.messageValue||this.senderReceiverFeature.senderValue||this.senderReceiverFeature.receiverValue):!1===this.isChecked}async optionallyAddBlockInput(){if(this.option.product?.bundles)return;if(!this.availableGiftVariants?.length)return;const e=Object.assign(document.createElement("input"),{type:"hidden",name:"properties[_Gift Block]",value:"product",part:"block"});this.block.target.formTarget&&e.setAttribute("form",this.block.target.formTarget),this.appendChild(e)}async optionallyRemoveBlockInput(){this.option.product?.bundles||this.availableGiftVariants?.length&&this.querySelectorAll('input[type="hidden"][part="block"]').forEach((e=>e.remove()))}triggerAction(){"event"===this.block.target.actionTypeDeveloper&&this.actionEventDeveloper()}actionEventDeveloper(){(0,n.tx)(this.identifier,"developer action: event");const e=new CustomEvent(this.block.target.actionDeveloper);document.dispatchEvent(e),document.documentElement.dispatchEvent(e)}fieldNameFor(e){return this.datafields[e]?`properties[${this.datafields[e]}]`:void 0}giftVariantHidden(e){const t=`${this.option.settings.visibilityTag}:${e.id.split("/").pop()}`;return this.productLine.tags.includes(t)}get giftVariants(){if("basic"===this.option.settings.optionMode)return[];const e=e=>{const t=!e.availableForSale,r=this.option.product?.hiddenInventory;return t&&r},t=e=>{const t=this.giftVariantHidden(e),r=this.option.product?.hiddenVisibility;return t&&r};let r=a.E.forProducts?.variants?.edges??[];if(r=r.filter((r=>{let i=r.node;return!e(i)&&!t(i)})),!this.option.settings.multipleGiftVariants)return[r.find((e=>e.node.availableForSale))].filter(Boolean);if(this.hiddenCheckbox){const e=(()=>{const e=window.Shopify?.locale||"en",t=this.block.labels,r=this.option.settings.giftCheckboxLabels;return t[e]||r[e]||t.primary||r.primary})();r=[{node:{id:"gid://shopify/ProductVariant/0",availableForSale:!0,price:{amount:0,currencyCode:window.Shopify?.currency?.active??"USD"},title:e,image:{url:this.option.product?.image?this.option.product.image:null}}},...r]}return r}get availableGiftVariants(){let e=this.giftVariants??[];return e=e.filter((e=>e.node.availableForSale)),e=e.filter((e=>{let t=e.node;return!this.giftVariantHidden(t)})),e=e.filter((e=>"gid://shopify/ProductVariant/0"!==e.node.id)),e}get checkboxFeature(){return this._checkboxFeature||(this._checkboxFeature=Object.assign(document.createElement("wrapped-feature-checkbox-simple"),{provider:this,option:this.option,block:this.block})),this._checkboxFeature}get variantFeature(){return this._variantFeature||(this._variantFeature=Object.assign(document.createElement("wrapped-feature-variant-simple"),{provider:this,option:this.option,block:this.block})),this._variantFeature}get senderReceiverFeature(){return this._senderReceiverFeature||(this._senderReceiverFeature=Object.assign(document.createElement("wrapped-feature-sender-receiver-simple"),{provider:this,option:this.option,block:this.block,senderValue:null,receiverValue:null})),this._senderReceiverFeature}get messageFeature(){return this._messageFeature||(this._messageFeature=Object.assign(document.createElement("wrapped-feature-message-simple"),{provider:this,option:this.option,block:this.block,messageValue:null})),this._messageFeature}get poweredByFeature(){return this._poweredByFeature||(this._poweredByFeature=Object.assign(document.createElement("wrapped-feature-powered-by-simple"),{provider:this,option:this.option,block:this.block})),this._poweredByFeature}get isChecked(){return this._isChecked||!1}set isChecked(e){this.setAttribute("is-checked",e),this._isChecked=e,this.checkboxFeature.isChecked=e}get ordersLimitReached(){return!window.Wrapped.settings.token||this.option.settings.ordersLimitReached||!1}get hiddenCheckbox(){return!1===this.block.primaryCheckbox&&!this.ordersLimitReached}get datafields(){return d(d({},this.option.datafields),{},{variantId:"_Gift Option ID",bundler:"_Wrapped Bundle"})}get productLine(){return s.h.product}get productId(){return String(window.Wrapped?.selectedProductId||0)}get variantId(){return String(window.Wrapped?.selectedVariantId||0)}get bundleId(){return this._bundleId||(this._bundleId=window.crypto?.randomUUID().substring(0,8)),this._bundleId}get hasGiftVariants(){return"basic"!==this.option.settings.optionMode&&a.E.forProducts?.variants?.edges?.length>0}get giftVariantsUnavailable(){return!!this.hasGiftVariants&&!this.availableGiftVariants.length}get isGiftOption(){return a.E.products.map((e=>e.id.split("/").pop())).includes(this.productId)}get giftBlockHidden(){return this.productLine.tags.includes(this.option.settings.visibilityTag)}}customElements.define("wrapped-product-provider",u)},930:function(e,t,r){"use strict";r.d(t,{s:function(){return i}});const i=(e,t)=>{let r;return function(){for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];clearTimeout(r),r=setTimeout((()=>{e.apply(void 0,n)}),t)}}},15:function(e,t,r){"use strict";r.d(t,{n:function(){return i}});const i=e=>{const t=["AF","AX","AL","DZ","AD","AO","AI","AG","AR","AM","AW","AC","AU","AT","AZ","BS","BH","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BA","BW","BV","BR","IO","BN","BG","BF","BI","KH","CA","CV","BQ","KY","CF","TD","CL","CN","CX","CC","CO","KM","CG","CD","CK","CR","HR","CU","CW","CY","CZ","CI","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","SZ","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GT","GG","GN","GW","GY","HT","HM","VA","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IM","IL","IT","JM","JP","JE","JO","KZ","KE","KI","KP","XK","KW","KG","LA","LV","LB","LS","LR","LY","LI","LT","LU","MO","MG","MW","MY","MV","ML","MT","MQ","MR","MU","YT","MX","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL","AN","NC","NZ","NI","NE","NG","NU","NF","MK","NO","OM","PK","PS","PA","PG","PY","PE","PH","PN","PL","PT","QA","CM","RE","RO","RU","RW","BL","SH","KN","LC","MF","PM","WS","SM","ST","SA","SN","RS","SC","SL","SG","SX","SK","SI","SB","SO","ZA","GS","KR","SS","ES","LK","VC","SD","SR","SJ","SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TA","TN","TR","TM","TC","TV","UG","UA","AE","GB","US","UM","UY","UZ","VU","VE","VN","VG","WF","EH","YE","ZM","ZW","ZZ"];let r=e.replace(/-/g,"_").toUpperCase();if(t.includes(r))return r;for(;r.length>2;)if(r=r.slice(0,-1),t.includes(r))return r;return"US"}},821:function(e,t,r){"use strict";r.d(t,{T:function(){return i}});const i=e=>{const t=["AF","AK","AM","AR","AS","AZ","BE","BG","BM","BN","BO","BR","BS","CA","CE","CKB","CS","CY","DA","DE","DZ","EE","EL","EN","EO","ES","ET","EU","FA","FF","FI","FIL","FO","FR","FY","GA","GD","GL","GU","GV","HA","HE","HI","HR","HU","HY","IA","ID","IG","II","IS","IT","JA","JV","KA","KI","KK","KL","KM","KN","KO","KS","KU","KW","KY","LB","LG","LN","LO","LT","LU","LV","MG","MI","MK","ML","MN","MR","MS","MT","MY","NB","ND","NE","NL","NN","NO","OM","OR","OS","PA","PL","PS","PT_BR","PT_PT","QU","RM","RN","RO","RU","RW","SA","SC","SD","SE","SG","SI","SK","SL","SN","SO","SQ","SR","SU","SV","SW","TA","TE","TG","TH","TI","TK","TO","TR","TT","UG","UK","UR","UZ","VI","WO","XH","YI","YO","ZH_CN","ZH_TW","ZU","ZH","PT","CU","VO","LA","SH","MO"];let r=e.replace(/-/g,"_").toUpperCase();if(t.includes(r))return r;for(;r.length>2;)if(r=r.slice(0,-1),t.includes(r))return r;return"EN"}},520:function(e,t,r){"use strict";r.d(t,{KO:function(){return a},mQ:function(){return s},tx:function(){return n},z3:function(){return o}});var i=r(740);const n=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"lime";i.A?.leaveBreadcrumb(`${e} - ${t}`,r),window.Wrapped.settings?.debug&&(r?console.debug(`%c[${e}:${(new Date).getTime()}] ${t}`,`color: ${n}`,r):console.debug(`%c[${e}:${(new Date).getTime()}] ${t}`,`color: ${n}`))},a=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"lime";window.Wrapped.settings?.debug&&(t?console.groupCollapsed(`%c[${e}]`,`color: ${r}`,t):console.groupCollapsed(`%c[${e}]`,`color: ${r}`))},s=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"lime";window.Wrapped.settings?.debug&&(t?console.groupEnd(`%c[${e}]`,`color: ${r}`,t):console.groupEnd(`%c[${e}]`,`color: ${r}`))},o=(e,t,r)=>{i.A?.leaveBreadcrumb(`${e} - ${t}`,r),window.Wrapped.settings?.debug&&(r?console.error(`[${e}:${(new Date).getTime()}] ${t}`,r):console.error(`[${e}:${(new Date).getTime()}] ${t}`))}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=r(520),t=r(951),i=r(486),n=r(740),a=r(250),s=r(787),o=r(384);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l=(()=>{const r="cart-line-mutations",d=c(c({},window.Wrapped.options?.product?.datafields),{},{variantId:"_Gift Option ID",bundler:"_Wrapped Bundle",block:"_Gift Block"}),u=e=>{const t=window.Wrapped.options?.product?.product?.priceMode;switch(t){case"none":return e.child?.quantity??1;case"order":default:return 1;case"quantity":return e.parent.quantity}},l=(e,t,r)=>{if(r.slice(t+1).some((t=>t.key===e.key)))return null;const i=String(e.value??"");return i&&""!==i.trim()?e:null};return{run:async()=>{try{if(n.A?.leaveBreadcrumb(r),!t.T.cartId)return;if(!window.Wrapped.options?.product?.product)return Promise.resolve({skipped:!0,reason:`${r} skipped [basic option mode]`});if(window.Wrapped.options?.product?.product?.bundles)return Promise.resolve({skipped:!0,reason:`${r} skipped [gift product bundle mode]`});const p=(()=>{const i=t.T.cart.lines.edges.reduce(((e,t)=>{let r=t.node;const i=r.bundleProperty?.value;if(!i)return e;const n="yes"===r.checkboxProperty?.value?"parent":"child";return e[i]=c(c({},e[i]||{parent:null,child:null}),{},{[n]:r}),e}),{}),n={cartLinesAdd:[],cartLinesUpdate:[],cartLinesRemove:[]};for(const t of Object.keys(i??{})){const a=i[t];if(a.parent){if(!a.child){const i=a.parent.blockProperty?.value;if(i){(0,e.tx)(r,`${t} child missing, adding to bundle`,void 0,"gray");const i=a.parent.variantIdProperty?.value;n.cartLinesAdd.push({merchandiseId:`gid://shopify/ProductVariant/${i}`,quantity:u(a),attributes:[{key:d.bundler,value:t}]}),n.cartLinesUpdate.push({id:a.parent.id,attributes:[...a.parent.attributes??[],{key:d.block,value:null}].map(l).filter(Boolean)});continue}if(!i){(0,e.tx)(r,`${t} child missing, reset parent`,void 0,"gray"),n.cartLinesUpdate.push({id:a.parent.id,attributes:[...a.parent.attributes??[],{key:d.checkbox,value:null},{key:d.variant,value:null},{key:d.variantId,value:null},{key:d.sender,value:null},{key:d.receiver,value:null},{key:d.message,value:null},{key:d.bundler,value:null},{key:d.block,value:null}].map(l).filter(Boolean)});continue}}if(a.parent&&a.child){const i=u(a);if(a.child.quantity!==i){(0,e.tx)(r,`${t} child quantity is mismatched (exp: ${i}, act: ${a.child.quantity})`),n.cartLinesUpdate.push({id:a.child.id,quantity:i});continue}}}else(0,e.tx)(r,`${t} parent missing, remove child`,void 0,"gray"),n.cartLinesRemove.push(a.child?.id)}return c(c({},a.u.variables),{},{cartLinesAdd:n.cartLinesAdd,cartLinesUpdate:n.cartLinesUpdate,cartLinesRemove:n.cartLinesRemove})})(),h=(e=>{const t=Boolean(e.cartLinesAdd?.length),r=Boolean(e.cartLinesUpdate?.length),n=Boolean(e.cartLinesRemove?.length);return`\n      ${i.b.fragment}\n\n      mutation CartLineMutations(\n        ${a.u.definitions}\n        ${t?"$cartLinesAdd: [CartLineInput!]!":""}\n        ${r?"$cartLinesUpdate: [CartLineUpdateInput!]!":""}\n        ${n?"$cartLinesRemove: [ID!]!":""}\n      ) @inContext(language: $language, country: $country) {\n        ${t?"cartLinesAdd(\n              cartId: $cartId\n              lines: $cartLinesAdd\n            ) {\n              cart {\n                ...CartFragment\n              }\n              userErrors {\n                field\n                message\n              }\n              warnings {\n                code\n                message\n                target\n              }\n            }\n            ":""}\n        ${r?"cartLinesUpdate(\n              cartId: $cartId\n              lines: $cartLinesUpdate\n            ) {\n              cart {\n                ...CartFragment\n              }\n              userErrors {\n                field\n                message\n              }\n              warnings {\n                code\n                message\n                target\n              }\n            }\n            ":""}\n        ${n?"cartLinesRemove(\n              cartId: $cartId\n              lineIds: $cartLinesRemove\n            ) {\n              cart {\n                ...CartFragment\n              }\n              userErrors {\n                field\n                message\n              }\n              warnings {\n                code\n                message\n                target\n              }\n            }\n            ":""}\n      }\n    `})(p);return p.cartLinesAdd?.length||p.cartLinesUpdate?.length||p.cartLinesRemove?.length?((0,e.KO)(r,"running mutation","fuchsia"),(0,e.tx)(r,"instructions:",p,"gray"),await s.r.request(h,p).then((e=>{let i=e.data,n=e.errors;if(n){const e=(n[0]?.extensions??{code:"NETWORK_ERROR"}).code;throw new o.u(`${e} in ${r}`,n,{operation:h,variables:p})}return t.T.save(i?.cartLinesUpdate?.cart??i?.cartLinesAdd?.cart??i?.cartLinesRemove?.cart??{}),i}))):Promise.resolve({skipped:!0,reason:`${r} nothing to update`})}catch(t){(0,e.tx)(r,"failed:",t,"red"),n.A?.notify(t,(e=>{e.addMetadata("errors",t.errors),e.addMetadata("graphql",t.graphql)})),window.Wrapped.buildExtensions()}finally{(0,e.mQ)(r)}}}})();function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function h(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=(()=>{const r="fetch-intercept";return{intercept:async()=>{if(window.Wrapped.settings.skipFetchInterceptor)return;const n=window.fetch;window.fetch=async function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];const d=s[0],c=s[1];if(new Headers((void 0===c?{}:c).headers).has("X-Wrapped"))return n.apply(window,s);const u=await n.apply(window,s),f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.T.cart);try{if(d.match("/cart/add")){(0,e.tx)(r,"intercepting: add");const t=u.clone(),n=await t.json();await i.b.run(),n?.properties?.["_Wrapped Bundle"]&&(await l.run().then((t=>{t?.skipped&&(0,e.tx)(r,t?.reason,void 0,"gray")})),Object.values(window.Wrapped.options||{}).flatMap((e=>e.blocks||[])).filter((e=>"cart_drawer"===e.blockType&&e.target?.action&&"event"===e.target?.actionType)).map((e=>e.target.action)).filter(((e,t,r)=>r.indexOf(e)===t)).forEach((t=>{setTimeout((()=>{(0,e.tx)(r,"action: event",{event:t},"gray"),document.dispatchEvent(new CustomEvent(t))}),1e3)})))}}catch(i){(0,e.z3)(r,i),t.T.save(f)}return u}}}})();var b=r(910);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const y=(()=>{const r="cart-list-mutations",d=m(m({},window.Wrapped.options?.order?.datafields),{},{variantId:"_Gift Option ID",bundled:"_Wrapped Bundle"}),c=(e,t,r)=>{if(r.slice(t+1).some((t=>t.key===e.key)))return null;const i=String(e.value??"");return i&&""!==i.trim()?e:null};return{run:async()=>{try{if(n.A?.leaveBreadcrumb(r),!t.T.cartId)return;if(!window.Wrapped.options?.order?.product)return Promise.resolve({skipped:!0,reason:`${r} skipped basic option mode`});const u=(()=>{if(!(t.T.cart.attributes??[]).find((e=>{let t=e.key,r=e.value;return t===d.checkbox&&"yes"===r})))return;if(!t.T.cart.variantIdAttribute?.value)return;const i=t.T.cart.lines.edges.find((e=>{let r=e.node;return!r.bundleProperty&&r.merchandise.id.split("/").pop()===String(t.T.cart.variantIdAttribute?.value)})),n=m({},a.u.variables);if(!i)return(0,e.tx)(r,"order: missing gift variant, resetting"),m(m({},n),{},{attributes:[...t.T.cart.attributes??[],{key:d.checkbox,value:null},{key:d.variant,value:null},{key:d.variantId,value:null},{key:d.message,value:null},{key:d.receiver,value:null},{key:d.sender,value:null}].map(c).filter(Boolean)});if(i){if(window.Wrapped.options?.order?.product?.bundles)return;const a=(e=>{const r=window.Wrapped.options.product?.product?.variants?.map((e=>e.id))||[],i=window.Wrapped.options?.order?.product?.priceMode,n=window.Wrapped.options?.order?.settings?.visibilityTag??"";switch(i||"none"){case"none":return e?.node?.quantity??1;case"item":return t.T.cart.lines.edges.reduce(((t,i)=>{let a=i.node;return a.id===e.node.id||r.includes(Number(a.merchandise.id.split("/").pop()))||a.merchandise.product.tags.includes(n)?t:t+1}),0);case"quantity":return t.T.cart.lines.edges.reduce(((t,i)=>{let a=i.node;return a.id===e.node.id||r.includes(Number(a.merchandise.id.split("/").pop()))||a.merchandise.product.tags.includes(n)?t:t+a.quantity}),0);case"sku":{const i=t.T.cart.lines.edges.reduce(((t,i)=>{let a=i.node;return a.id===e.node.id||r.includes(Number(a.merchandise.id.split("/").pop()))||a.merchandise.product.tags.includes(n)||(t[a.id]=1),t}),{});return Object.keys(i).length||1}case"box_weight":{const i=t.T.cart.lines.edges.reduce(((t,i)=>{let a=i.node;if(a.id===e.node.id)return t;if(r.includes(Number(a.merchandise.id.split("/").pop())))return t;if(a.merchandise.product.tags.includes(n))return t;switch(a.merchandise.weightUnit){case"GRAMS":return t+a.quantity*a.merchandise.weight/1e3;case"KILOGRAMS":return t+a.quantity*a.merchandise.weight;case"OUNCES":return t+a.quantity*a.merchandise.weight*.02835;case"POUNDS":return t+a.quantity*a.merchandise.weight*.4536;default:return t}}),0),a=(b.E.forOrders?.variants?.edges?.find((t=>t.node.id===e.node.merchandise.id))??{}).node;return Math.ceil(i/(a?.boxWeightLimit?.value??3)||1)}case"box_item":{const i=t.T.cart.lines.edges.reduce(((t,i)=>{let a=i.node;return a.id===e.node.id||r.includes(Number(a.merchandise.id.split("/").pop()))||a.merchandise.product.tags.includes(n)?t:t+a.quantity}),0),a=(window.Wrapped.options.order?.product?.variants?.find((t=>{let r=t.id;return Number(r)===Number(e.node.merchandise.id.split("/").pop())}))??{}).boxItemLimit;return Math.ceil(i/(a??2)||1)}default:return 1}})(i);if(i.node.quantity!==a)return(0,e.tx)(r,`order: gift variant quantity is mismatched (exp: ${a}, act: ${i.node.quantity})`),m(m({},n),{},{cartLinesUpdate:[{id:i.node.id,quantity:a}]})}})(),l=(e=>{const t=Boolean(e?.attributes),r=Boolean(e?.cartLinesUpdate?.length);return t||r?`\n      ${i.b.fragment}\n\n      mutation CartListMutations(\n        ${a.u.definitions}\n        ${t?"$attributes: [AttributeInput!]!":""}\n        ${r?"$cartLinesUpdate: [CartLineUpdateInput!]!":""}\n      ) @inContext(language: $language, country: $country) {\n        ${t?"cartAttributesUpdate(\n              cartId: $cartId\n              attributes: $attributes\n            ) {\n              cart {\n                ...CartFragment\n              }\n              userErrors {\n                field\n                message\n              }\n              warnings {\n                code\n                message\n                target\n              }\n            }\n            ":""}\n        ${r?"cartLinesUpdate(\n              cartId: $cartId\n              lines: $cartLinesUpdate\n            ) {\n              cart {\n                ...CartFragment\n              }\n              userErrors {\n                field\n                message\n              }\n              warnings {\n                code\n                message\n                target\n              }\n            }\n            ":""}\n      }\n    `:"operation no-op"})(u);return u?.attributes||u?.cartLinesUpdate?.length?((0,e.KO)(r,"running mutation","fuchsia"),(0,e.tx)(r,"instructions:",u,"gray"),await s.r.request(l,u).then((e=>{let i=e.data,n=e.errors;if(n){const e=(n[0]?.extensions??{code:"NETWORK_ERROR"}).code;throw new o.u(`${e} in ${r}`,n,{operation:l,variables:u})}return t.T.save(i?.cartAttributesUpdate?.cart??i?.cartLinesUpdate?.cart??{}),i}))):Promise.resolve({skipped:!0,reason:`${r} nothing to update`})}catch(t){(0,e.tx)(r,"failed:",t,"red"),n.A?.notify(t,(e=>{e.addMetadata("errors",t.errors),e.addMetadata("graphql",t.graphql)})),window.Wrapped.buildExtensions()}finally{(0,e.mQ)(r)}}}})(),w=(()=>{const t="page-intercept";return{intercept:async()=>{(0,e.tx)(t,"intercepting: page load"),await l.run().then((async r=>{r?.skipped?(0,e.tx)(t,r?.reason,void 0,"gray"):(r?.cartLinesAdd||r?.cartLinesUpdate||r?.cartLinesRemove)&&((0,e.tx)(t,"performing callback/reload"),window.Wrapped?.settings?.processorCallback?await window.Wrapped.settings.processorCallback():window.location.reload())})),await y.run().then((async r=>{r?.skipped?(0,e.tx)(t,r?.reason,void 0,"gray"):(r?.cartAttributesUpdate&&((0,e.tx)(t,"rebuild blocks"),window.Wrapped.buildExtensions()),r?.cartLinesUpdate&&((0,e.tx)(t,"performing callback/reload"),window.Wrapped.buildExtensions(),window.Wrapped?.settings?.processorCallback?await window.Wrapped.settings.processorCallback():window.location.reload()))}))}}})();function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function k(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E=(()=>{const r="xhr-intercept";return{intercept:async()=>{if(window.Wrapped.settings.skipXhrInterceptor)return;const n=XMLHttpRequest.prototype.open,a=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._url=t[1],n.apply(this,t)},XMLHttpRequest.prototype.send=function(){this.addEventListener("load",async function(){const n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.T.cart);try{if(this._url.match("/cart/add")){(0,e.tx)(r,"intercepting: add");const t=JSON.parse(this.responseText);await i.b.run(),t?.properties?.["_Wrapped Bundle"]&&(await l.run().then((t=>{t?.skipped&&(0,e.tx)(r,t?.reason,void 0,"gray")})),Object.values(window.Wrapped.options||{}).flatMap((e=>e.blocks||[])).filter((e=>"cart_drawer"===e.blockType&&e.target?.action&&"event"===e.target?.actionType)).map((e=>e.target.action)).filter(((e,t,r)=>r.indexOf(e)===t)).forEach((t=>{setTimeout((()=>{(0,e.tx)(r,"action: event",{event:t},"gray"),document.dispatchEvent(new CustomEvent(t))}),1e3)})))}}catch(i){(0,e.z3)(r,i),t.T.save(n)}}.bind(this));for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];a.apply(this,s)}}}})();function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,o=[],d=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;d=!1}else for(;!(d=(i=a.call(r)).done)&&(o.push(i.value),o.length!==t);d=!0);}catch(e){c=!0,n=e}finally{try{if(!d&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}const A=(()=>{const t="request-intercept",r={add:"/cart/add",change:"/cart/change",update:"/cart/update"};return{intercept:async()=>{if(window.PerformanceObserver)try{new PerformanceObserver((n=>{n.getEntriesByType("resource").filter((e=>["fetch","xmlhttprequest"].includes(e.initiatorType))).forEach((async n=>{const a=Object.entries(r).find((e=>{let t=P(e,2),r=(t[0],t[1]);return n.name.includes(r)}));if(a){const r=P(a,2),n=r[0],s=r[1];if((0,e.tx)(t,`detected: ${s}`,void 0,"MediumVioletRed"),"add"===n)return void(window.location.pathname.match(/\/(collections|products)/)&&setTimeout(window.Wrapped.buildExtensions,500));await i.b.run(),await l.run().then((async r=>{r?.skipped?(0,e.tx)(t,r?.reason,void 0,"gray"):r?.cartLinesAdd||!r?.cartLinesUpdate&&!r?.cartLinesRemove||((0,e.tx)(t,"performing callback/reload"),window.Wrapped?.settings?.processorCallback?await window.Wrapped.settings.processorCallback():window.location.reload())})),await y.run().then((async r=>{r?.skipped?(0,e.tx)(t,r?.reason,void 0,"gray"):(r?.cartAttributesUpdate&&((0,e.tx)(t,"performing extension rebuild"),window.Wrapped.buildExtensions(!1)),r?.cartLinesUpdate&&((0,e.tx)(t,"performing callback/reload"),window.Wrapped.buildExtensions(!1),window.Wrapped?.settings?.processorCallback?await window.Wrapped.settings.processorCallback():window.location.reload()))}))}}))})).observe({entryTypes:["resource"]})}catch(r){(0,e.z3)(t,r)}else(0,e.tx)(t,"PerformanceObserver not supported",void 0,"red")}}})();var x=r(15),j=r(821);const C=(()=>{const t="gift-products-query";return{run:async()=>{try{if(!window.Wrapped.settings.token)return void(0,e.tx)(t,"token is required",void 0,"fuchsia");(0,e.tx)(t,"requesting...",void 0,"fuchsia"),n.A?.leaveBreadcrumb(t);const r='\n      fragment ProductFragment on Product {\n        id\n        handle\n        title\n        availableForSale\n        variants(first: 250) {\n          edges {\n            node {\n              id\n              availableForSale\n              image {\n                url(transform: { maxWidth: 600 })\n              }\n              price {\n                amount\n                currencyCode\n              }\n              sku\n              title\n              boxItemLimit: metafield(namespace: "wrapped", key: "box_item_limit") {\n                value\n              }\n              boxWeightLimit: metafield(namespace: "wrapped", key: "box_weight_limit") {\n                value\n              }\n            }\n          }\n        }\n      }\n\n      query GiftProductQuery($orderOptionId: ID!, $productOptionId: ID!, $language: LanguageCode!, $country: CountryCode!) @inContext(language: $language, country: $country) {\n        orderOption: product(id: $orderOptionId) {\n          ...ProductFragment\n        }\n        productOption: product(id: $productOptionId) {\n          ...ProductFragment\n        }\n      }\n    ',i={language:(0,j.T)(window.Shopify?.locale??"EN"),country:(0,x.n)(window.Shopify?.country??"US"),orderOptionId:window.Wrapped?.options?.order?.product?.gid??"gid://shopify/Product/0",productOptionId:window.Wrapped?.options?.product?.product?.gid??"gid://shopify/Product/0"};await s.r.request(r,i).then((e=>{let t=e.data,n=e.errors;if(n)throw new o.h(n?.[0]?.message,n,{operation:r,variables:i});b.E.save(t??{})}))}catch(r){throw(0,e.tx)(t,"failed:",r,"red"),r instanceof o.h&&n.A?.notify(r,(e=>(e.addMetadata("errors",r.errors),e.addMetadata("graphql",r.graphql),e.groupingHash=`${r.errorClass}-${t}`,100*Math.random()>1))),b.E.save({}),r}}}})();var I=r(293);const $=(()=>{const t="product-page-query";return{run:async()=>{try{if(!window.location.pathname.match("/products"))return;if(!window.Wrapped?.selectedProductId)return void(0,e.tx)(t,"product id is not available",void 0,"fuchsia");if(!window.Wrapped.settings.token)return void(0,e.tx)(t,"token is required",void 0,"fuchsia");(0,e.tx)(t,"requesting...",void 0,"fuchsia"),n.A?.leaveBreadcrumb(t);const r="\n      fragment ProductFragment on Product {\n        id\n        handle\n        title\n        availableForSale\n        tags\n      }\n\n      query ProductQuery($id: ID!) {\n        product(id: $id) {\n          ...ProductFragment\n        }\n      }\n    ",i={id:`gid://shopify/Product/${window.Wrapped?.selectedProductId}`};return await s.r.request(r,i).then((e=>{let t=e.data,n=e.errors;if(n)throw new o.h(n?.[0]?.message,n,{operation:r,variables:i});I.h.save(t?.product??{})}))}catch(r){throw(0,e.tx)(t,"failed:",r,"red"),r instanceof o.h&&n.A?.notify(r,(e=>(e.addMetadata("errors",r.errors),e.addMetadata("graphql",r.graphql),e.groupingHash=`${r.errorClass}-${t}`,100*Math.random()>1))),I.h.save({}),r}}}})();function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const V=(()=>{const t={rebuy_smart_cart:{_metadata:{name:"Rebuy Personalization Engine",author:"Rebuy",appListing:"https://apps.shopify.com/rebuy"},order:{selector:'#rebuy-cart div[data-rebuy-cart-anchor="footer"]',position:"beforebegin",action:"window.Rebuy?.Cart?.fetchCart?.()",actionType:"function"},product:{selector:"#rebuy-cart ul li div.rebuy-cart__flyout-item-info",position:"beforeend",action:"window.Rebuy?.Cart?.fetchCart?.()",actionType:"function"}},amp_slidecart:{_metadata:{name:"AMP | Slide Cart Drawer",author:"AMP",appListing:"https://apps.shopify.com/slide-cart"},order:{selector:"#slidecarthq footer.footer div.footer-row",position:"afterend",action:"window.SLIDECART_UPDATE?.()",actionType:"function"},product:{selector:"#slidecarthq div.items div.item div.main div.main-bottom",position:"beforebegin",action:"window.SLIDECART_UPDATE?.()",actionType:"function"}},heysenior_slidecart:{_metadata:{name:"Fast Cart | Slide Cart Drawer",author:"Hey Senior",appListing:"https://apps.shopify.com/swatches-popup-cart"},order:{selector:'div.hs-cart-drawer-0 div.hs-footer-layout form[action*="/cart"]',position:"beforebegin",action:"window.HS_SLIDE_CART_UPDATE?.()",actionType:"function"},product:{selector:"div.hs-cart-drawer-0 div.hs-item-cart-description",position:"afterend",action:"window.HS_SLIDE_CART_UPDATE?.()",actionType:"function"}},aftersell_upcart:{_metadata:{name:"UpCartâ€”Cart Drawer Cart Upsell",author:"AfterSell",appListing:"https://apps.shopify.com/upcart-cart-builder"},order:{selector:"#CartPopup div.upcart-cart-body + div > div:first-child",position:"afterbegin",action:"window.upcartRegisterAddToCart?.()",actionType:"function"},product:{selector:'#CartPopup div.upcart-cart-body div div[class*="styles_ProductRow__product__"] div.Stack__item--fill',position:"beforeend",action:"window.upcartRegisterAddToCart?.()",actionType:"function"}}};return class{static intercept(e,t){"cart_drawer"===e.blockType&&(e.target=T(T({},e.target),this.getSettings(t)))}static getSettings(r){for(const i of Object.values(t))if(document.querySelector(i[r]?.selector))return(0,e.tx)("third-party-drawer","found",{name:i._metadata.name,author:i._metadata.author,appListing:i._metadata.appListing,config:i[r]}),i[r];return{}}}})(),D={run(){if(window.Wrapped){if(window.Wrapped.options&&Object.prototype.hasOwnProperty.call(window.Wrapped.settings,"token")&&!window.Wrapped.settings.token){const e=new FormData;return e.append("attributes[Important Notice]","This customer was unable to add gifting options."),e.append("attributes[Next Steps]","Visit Wrapped in the Shopify admin to allow new storefront permissions ðŸŽ"),void fetch(window.Shopify.routes.root+"cart/update.js",{method:"POST",body:e})}if(window.Wrapped.options?.order?.settings?.ordersLimitReached||window.Wrapped.options?.product?.settings?.ordersLimitReached){const e=new FormData;e.append("attributes[Important Notice]","This customer was unable to add gifting options."),e.append("attributes[Next Steps]","Visit Wrapped in the Shopify admin to resume gifting service ðŸŽ"),fetch(window.Shopify.routes.root+"cart/update.js",{method:"POST",body:e})}}}};function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}if(r(223),!window.Wrapped?.version){const e=/\/(wrapped(?:-\w+)?-\d+)\//;try{Array.from(document.getElementsByTagName("script")).forEach((t=>{if(t.src){const r=t.src.match(e);r&&(window.Wrapped.version=r[1])}}))}catch(e){}}window.Wrapped?.settings?.debug&&(window.Wrapped.CartQuery=i.b,window.Wrapped.CartSession=t.T,window.Wrapped.GiftProductQuery=C,window.Wrapped.GiftProductSession=b.E,window.Wrapped.ProductPageQuery=$,window.Wrapped.ProductPageSession=I.h),window.Wrapped.buildExtensions=async function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,e.tx)("document","building",structuredClone(t.T.cart)),r&&await i.b.run();const a=(e,t,r,i)=>{const n=Object.assign(document.createElement("wrapped-extension"),{option:t,block:r,targetGroup:s(r.blockType),providerKind:o(e,r.blockType)});return n.setAttribute("uuid",r.id),n.setAttribute("index",i),n},s=e=>({cart_page:"cart-page",cart_drawer:"drawer",product_page:"product-page"}[e]),o=(e,t)=>({order:{cart_page:"cart-list",cart_drawer:"cart-list"},product:{cart_page:"cart-line",cart_drawer:"cart-line",product_page:"product"}}[e][t]);document.querySelectorAll("wrapped-extension").forEach((e=>e.remove())),Object.entries(M({},window.Wrapped.options)).forEach((e=>{let t=(c=2,function(e){if(Array.isArray(e))return e}(d=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,o=[],d=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;d=!1}else for(;!(d=(i=a.call(r)).done)&&(o.push(i.value),o.length!==t);d=!0);}catch(e){c=!0,n=e}finally{try{if(!d&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw n}}return o}}(d,c)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(d,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],i=t[1];var d,c;i.blocks.forEach((e=>{if(!e.target){if(!Object.prototype.hasOwnProperty.call(e.targets??{},window.Shopify?.theme?.id))return void n.A?.notify("Gift block is missing target",(t=>{t.groupingHash="StorefrontGiftBlockError",t.addMetadata("block",e)}));e.target=e.targets[window.Shopify?.theme?.id],delete e.targets}V.intercept(e,r);const t=document.querySelectorAll(`wrapped-extension-block[data-app-block="${o(r,e.blockType)}"][data-target-group="${s(e.blockType)}"]`);t.length>0?t.forEach(((t,n)=>{const s=a(r,i,e,n);t.insertAdjacentElement("afterbegin",s)})):(e.target?.selector?.split(",")||[]).forEach((t=>{document.querySelectorAll(t).forEach(((t,n)=>{t.insertAdjacentElement(e.target.position,a(r,i,e,n))}))}))}))}))};const N=async function(r){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.T.cart||await i.b.run(),"loading"===document.readyState?((0,e.tx)("document","readystate loading"),setTimeout((()=>{N(r)}),25)):"interactive"===document.readyState?(n&&((0,e.tx)("document","readystate interactive"),r()),setTimeout((()=>{N(r,!1)}),25)):"complete"===document.readyState&&((0,e.tx)("document","readystate complete"),r())};(async()=>{(0,e.tx)("document","initializing");const t=new Set(Object.values(M({},window.Wrapped.options)).flatMap((e=>e.blocks?.map((e=>e.target?.selector))||[])));let r=!1;new MutationObserver((i=>{r||(r=!0,requestAnimationFrame((()=>{r=!1;const n=i.find((e=>e.addedNodes.length>0?Array.from(e.addedNodes).find((e=>e&&e.querySelector&&[...t].some((t=>e.querySelector(t))))):"attributes"===e.type&&"aria-hidden"===e.attributeName&&t.size>0&&[...t].some((t=>e.target.querySelector(t))))),a=i.find((e=>Array.from(e.removedNodes).find((e=>e&&"WRAPPED-EXTENSION"!==e.nodeName&&e.querySelector&&e.querySelector("wrapped-extension")))));(n||a)&&((0,e.tx)("document",n?"block target added":"block target removed",n||a),window.Wrapped.buildExtensions(),window.Wrapped.buildExtensions(!0))})))})).observe(document.body,{attributes:!0,childList:!0,subtree:!0}),(0,e.KO)("document","running queries"),await Promise.all([i.b.run(),C.run(),$.run()]),(0,e.mQ)("document"),await w.intercept(),await f.intercept(),await E.intercept(),await A.intercept(),D.run(),N((async()=>{window.Wrapped?.options&&window.Wrapped.buildExtensions(!1)}))})()}()}();